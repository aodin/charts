var rates=(()=>{var tt=Object.create;var v=Object.defineProperty;var it=Object.getOwnPropertyDescriptor;var st=Object.getOwnPropertyNames;var et=Object.getPrototypeOf,at=Object.prototype.hasOwnProperty;var rt=(e,s,t)=>s in e?v(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var nt=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),ot=(e,s)=>{for(var t in s)v(e,t,{get:s[t],enumerable:!0})},$=(e,s,t,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of st(s))!at.call(e,r)&&r!==t&&v(e,r,{get:()=>s[r],enumerable:!(i=it(s,r))||i.enumerable});return e};var f=(e,s,t)=>(t=e!=null?tt(et(e)):{},$(s||!e||!e.__esModule?v(t,"default",{value:e,enumerable:!0}):t,e)),ht=e=>$(v({},"__esModule",{value:!0}),e);var D=(e,s,t)=>rt(e,typeof s!="symbol"?s+"":s,t);var m=nt((_t,P)=>{P.exports=d3});var xt={};ot(xt,{Rates:()=>yt,percentChange:()=>J,quarter:()=>j});var c=f(m());var E=f(m());var W=f(m());function X(e,s,t=0,i=1){return e===1?[s((i-t)/2+t)]:W.quantize(r=>s(r*(i-t)+t),e)}var G=class{constructor(s,t=i=>i){}screenHeightPercent(s){return this.config.SCREEN_HEIGHT_PERCENT=s,this}animationDuration(s){return this.config.DURATION_MS=s,this}noAnimation(){return this.animationDuration(0)}},H=class extends G{constructor(s,t=i=>i){super(s,t),this.hidden=new E.InternSet}backgroundOpacity(s){return this.config.BACKGROUND_OPACITY=s,this}yAxisRight(){return this.config.Y_AXIS_RIGHT=!0,this}useDiscreteScheme(s){return this.colors=E.scaleOrdinal().domain(this.Z).range(s),this}useContinuousScheme(s,t=0,i=1){return this.useDiscreteScheme(X(this.Z.length,s,t,i))}invertScheme(){return this.colors=this.colors.range(this.colors.range().reverse()),this}startHidden(){return this.hidden=new E.InternSet(this.Z),this}hide(...s){this.hidden=this.hidden.union(new E.InternSet(s)),this.toggle()}show(...s){this.hidden=this.hidden.difference(new E.InternSet(s)),this.toggle()}setHidden(...s){this.hidden=new E.InternSet(s)}hideAll(){this.hidden=new E.InternSet(this.Z),this.toggle()}showAll(){this.hidden.clear(),this.toggle()}};var _=f(m()),F=class{constructor(s,t,i,r){this.top=s,this.right=t,this.bottom=i,this.left=r}};function B(){return new F(15,15,25,25)}var M=class{constructor(s,t,i){this.width=s,this.height=t,this.pad=i||B()}get rangeX(){return[this.pad.left,this.width-this.pad.right]}get rangeY(){return[this.height-this.pad.bottom,this.pad.top]}get innerWidth(){return this.width-this.pad.left-this.pad.right}get innerHeight(){return this.height-this.pad.top-this.pad.bottom}get innerMinimum(){return _.min([this.innerWidth,this.innerHeight])}get midpoint(){return[this.width/2,this.height/2]}};function V(e,{minWidth:s=400,maxWidth:t=void 0,minHeight:i=300,maxHeight:r=void 0,screenHeightPercent:l=.5}={}){let o=document.querySelector(e),d=_.max([o.offsetWidth,s]);t&&(d=_.min([d,t]));let p=window.innerHeight*l;return p=_.max([p,i]),r&&(p=_.min([p,r])),new M(d,p,B())}function lt(e,s,t){return _.select(e).append("svg").attr("viewBox",[0,0,s,t]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("overflow","visible")}function O(e,s){let t=_.select(e);if(!t.node())throw new Error(`Unable to find a DOM element for selector '${e}'`);if(t.node().tagName==="svg"){let l=t,o=+l.attr("width"),d=+l.attr("height");if(o&&d)return[l,new M(o,d)];{let p=V(e,{screenHeightPercent:s.SCREEN_HEIGHT_PERCENT});return[l,p]}}let i=V(e,{screenHeightPercent:s.SCREEN_HEIGHT_PERCENT});return[lt(e,i.width,i.height),i]}var dt=f(m());function L(e){return e=String(e).trim(),e&&(e=e.replace(" ","_"),isNaN(e.charAt(0))||(e="_"+e),e)}var U=f(m());function b(e,s,t,i=null,r=""){let l=e.append("g").attr("width",s.innerWidth).attr("height",s.innerHeight).attr("class",r).style("visibility","hidden"),o=U.axisLeft(t).tickFormat(i),p=l.call(o).selectAll(".tick text"),n=0,y=0;return p.each(function(){let I=this.getBoundingClientRect();I.width>n&&(n=I.width),I.height>y&&(y=I.height)}),l.remove(),[n,y]}function k(e,s){var t=!0;return function(){t&&(e.apply(this,arguments),t=!1,setTimeout(()=>{t=!0},s))}}var g=f(m());var N=f(m()),Mt=N.utcFormat("%b"),Ut=N.utcFormat("%b %-d"),zt=N.utcFormat("%b %Y"),Xt=N.utcFormat("%b %-d, %Y"),Ft=N.utcFormat("%B %-d, %Y");function j(e){return`${parseInt(e.getUTCMonth()/3)+1}Q ${e.getUTCFullYear()}`}var S=f(m());var Q=f(m()),Qt=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}).format,J=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}).format,Jt=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",minimumFractionDigits:1,maximumFractionDigits:2}).format,ti=Q.format(",.0f");var a=f(m());function pt(e){return e.getTotalLength?e.getTotalLength():null}var Y=class extends H{constructor(t,i=r=>r){super(t,i);D(this,"xFormat",null);D(this,"yFormat",null);this.config={SCREEN_HEIGHT_PERCENT:.5,DURATION_MS:500,Y_AXIS_RIGHT:!1,BACKGROUND_OPACITY:.3,HIGHLIGHT_STROKE_WIDTH:2,STROKE_WIDTH:1.5,DOT_RADIUS:3,HIDE_EMPTY_CHART:!1,COLORS:a.schemeCategory10,MARGIN_TICK:3},this.data=this.parseData(t,i),this.items=this.parseItems(t),this.Z=this.parseZ(t),this.colors=this.setColors(t)}parseData(t,i){return a.map(t,i)}parseItems(t){return Array.from(new a.InternSet(a.map(this.data,i=>i.z)))}parseZ(t){return this.items}setColors(t){return a.scaleOrdinal().domain(this.Z).range(this.config.COLORS)}get legend(){return a.map(this.Z,t=>({key:t,color:this.colors(t)}))}get zVisible(){let t=new a.InternSet(this.Z);return this.hidden.forEach(i=>t.delete(i)),Array.from(t)}get visibleData(){return a.filter(this.data,t=>!this.hidden.has(t.z))}get empty(){return this.zVisible.length===0}get xDomain(){return a.extent(a.map(this.data,t=>t.x))}get yDomain(){return this.visibleData.length?a.extent(a.map(this.visibleData,t=>t.y)):a.extent(a.map(this.data,t=>t.y))}get xScale(){return a.scaleLinear().domain(this.xDomain).range([0,this.layout.innerWidth])}get yScale(){return a.scaleLinear().domain(this.yDomain).range([this.layout.innerHeight,0])}defined(t,i){return!0}xAxis(t,i){t.call(a.axisBottom(i).tickSize(3).tickFormat(this.xFormat))}yAxis(t,i){this.config.Y_AXIS_RIGHT?t.call(a.axisRight(i).tickSize(0).tickFormat(this.yFormat)):t.call(a.axisLeft(i).tickSize(0).tickFormat(this.yFormat))}grid(t,i,r){t.call(a.axisLeft(r).tickSize(-this.layout.innerWidth).tickFormat(""))}updateLayout(){let[t,i]=b(this.svg,this.layout,this.xScale,this.xFormat,"x axis");this.layout.pad.bottom=a.max([this.layout.pad.bottom,i]);let[r,l]=b(this.svg,this.layout,this.yScale,this.yFormat,"y axis");this.config.Y_AXIS_RIGHT?(this.layout.pad.right=a.max([this.layout.pad.right,r+this.config.MARGIN_TICK+5]),this.layout.pad.left=5):this.layout.pad.left=a.max([this.layout.pad.left,r+this.config.MARGIN_TICK+5])}render(t){if(!this.data.length)return;[this.svg,this.layout]=O(t,this.config),this.updateLayout(),this.x=this.xScale,this.y=this.yScale,this.svg.attr("opacity",1),this.svg.append("defs").append("clipPath").attr("id","inner-clip-path").append("rect").attr("width",this.layout.width).attr("height",this.layout.height),this.svg.attr("clip-path","url(#inner-clip-path)"),this.gx=this.svg.append("g").attr("class","x axis").attr("transform",`translate(${this.layout.pad.left},${this.layout.innerHeight+this.layout.pad.top})`);let i=`translate(${this.layout.pad.left-this.config.MARGIN_TICK},${this.layout.pad.top})`;this.config.Y_AXIS_RIGHT&&(i=`translate(${this.layout.pad.left+this.layout.innerWidth+this.config.MARGIN_TICK},${this.layout.pad.top})`),this.gy=this.svg.append("g").attr("class","y axis").attr("transform",i),this.gGrid=this.svg.append("g").attr("class","grid").attr("transform",`translate(${this.layout.pad.left},${this.layout.pad.top})`);let r=this.svg.append("g").attr("class","inner").attr("transform",`translate(${this.layout.pad.left}, ${this.layout.pad.top})`),l=a.group(this.data,n=>n.z);this.paths=r.append("g").attr("fill","none").attr("stroke-width",this.config.STROKE_WIDTH).selectAll("path").data(l).join("path"),this.dot=r.append("g").attr("class","dot").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.config.DOT_RADIUS),this.previousUpdate=!1;let o=this.empty;this.gx.call(this.xAxis.bind(this),this.x).attr("opacity",1),this.gy.call(this.yAxis.bind(this),this.y).attr("opacity",o?0:1),this.gGrid.call(this.grid.bind(this),this.x,this.y);let d=a.line().digits(2).defined(this.defined).x(n=>this.x(n.x)).y(n=>this.y(n.y));this.paths.attr("d",([,n])=>d(n)).attr("stroke",([n])=>this.colors(n)).attr("class",([n])=>L(n)).attr("opacity",([n])=>this.hidden.has(n)?0:1);let p=a.map(this.paths,n=>pt(n));this.paths.attr("stroke-dasharray",(n,y)=>this.getStrokeDasharray(n,y,p)).attr("stroke-dashoffset",(n,y)=>this.getStrokeDashOffset(n,y,p)),this.update(this.x,this.y)}getStrokeDasharray(t,i,r,l){return l?"1 0":r[i]?`${r[i]} ${r[i]}`:null}getStrokeDashOffset(t,i,r){return r[i]||0}update(t,i){this.hideDot();let r=this.empty;this.config.HIDE_EMPTY_CHART&&this.svg.transition().duration(this.config.DURATION_MS).attr("opacity",r?0:1),this.gx.transition().duration(this.config.DURATION_MS).call(this.xAxis.bind(this),t),this.gy.transition().duration(this.config.DURATION_MS).call(this.yAxis.bind(this),i).attr("opacity",r?0:1),this.gGrid.transition().duration(this.config.DURATION_MS).attr("visibility",r?"hidden":"visible").call(this.grid.bind(this),t,i);let l=a.line().digits(2).defined(this.defined).x(o=>t(o.x)).y(o=>i(o.y));this.paths.transition().duration(this.config.DURATION_MS).attr("d",([,o])=>l(o)).attr("stroke-dashoffset",0).attr("opacity",([o])=>this.hidden.has(o)?0:1),this.previousUpdate&&this.paths.attr("stroke-dasharray",(o,d)=>this.getStrokeDasharray(o,d,[],this.previousUpdate)),this.previousUpdate=!0}placeDot(t){let i=this.data[t];this.dot.style("display",null).attr("transform",`translate(${this.x(i.x)},${this.y(i.y)})`),this.circle.attr("fill",this.colors(i.z))}hideDot(){this.dot.style("display","none")}noHighlight(){this.paths.attr("opacity",([t])=>this.hidden.has(t)?0:1).attr("stroke-width",this.config.STROKE_WIDTH)}highlight(t){this.paths.attr("opacity",([i])=>this.hidden.has(i)?0:i===t?1:this.config.BACKGROUND_OPACITY).attr("stroke-width",([i])=>i===t?this.config.HIGHLIGHT_STROKE_WIDTH:this.config.STROKE_WIDTH)}onEvent(t,i){let r=null,l=d=>{let[p,n]=a.pointer(d);p-=this.layout.pad.left,n-=this.layout.pad.top;let y=a.map(this.data,x=>this.hidden.has(x.z)?null:Math.hypot(this.x(x.x)-p,this.y(x.y)-n)),I=a.leastIndex(y);if(I===-1||y[I]===null||typeof I>"u"||r&&r==I)return;this.placeDot(I);let h=this.data[I],T={x:h.x,y:h.y,z:h.z,dx:this.x(h.x)+this.layout.pad.left,dy:this.y(h.y)+this.layout.pad.top};t&&t.call(this,T,d)},o=d=>{this.hideDot(),i&&i.call(this,d)};this.svg.on("pointermove",k(l,20.83)).on("pointerleave",o).on("touchstart",d=>{l(d),d.preventDefault()})}toggle(){this.visibleData.length?this.y=this.yScale:this.y=a.scaleLinear().domain(this.y.domain()).range([this.layout.innerHeight,this.layout.innerHeight]),this.update(this.x,this.y)}};var z=class extends Y{get xScale(){return a.scaleUtc().domain(this.xDomain).range([0,this.layout.innerWidth])}sortData(s){return s.sort((t,i)=>t.x-i.x),s}parseData(s,t){return this.sortData(super.parseData(s,t))}};var gt=f(m());var mt=f(m());var A=f(m());var u=f(m());function ft(e){return{x:d3.isoParse(e[0]),y:e[2],z:e[1]}}var K=class extends z{constructor(t){super(t);D(this,"yFormat",d3.format(",~%"));this.screenHeightPercent(.75),this.useContinuousScheme(d3.interpolateRainbow,.1,.9)}parseData(t){return d3.map(t.values,ft)}parseItems(t){return t.items}parseZ(t){return d3.map(this.items,i=>i.abbrev)}get legend(){return d3.map(this.items,t=>Object.assign({color:this.colors(t.abbrev)},t))}render(t){super.render(t);let i="chart-tooltip",r=d3.select("body").append("div").attr("id",i).style("pointer-events","none").style("position","absolute").style("opacity",0).style("font-size","13px"),l=document.getElementById(i),o=document.querySelector(t),d=this.legend.reduce((h,T)=>(h[T.abbrev]=T.name,h),{}),p=h=>{this.highlight(h.z);let T=d[h.z],x=rates.quarter(h.x),w=rates.percentChange(h.y);r.html(`<strong>${T}</strong></br><em>${x}</em></br>${w}`);let C=-l.offsetHeight-5,R=0;h.dx>5*o.offsetWidth/6?(R=-l.offsetWidth-10,r.style("text-align","right")):r.style("text-align","left"),h.dy<o.offsetHeight/4&&(C=5),r.style("opacity",1).style("left",`${h.dx+o.offsetLeft+R}px`).style("top",`${h.dy+o.offsetTop+C}px`)},n=()=>{this.noHighlight(),r.style("opacity",0)};this.onEvent(p,n);let y=document.querySelector("#legend"),I=document.querySelector("#legendTemplate");this.legend.forEach(h=>{let T=I.content.cloneNode(!0),x=T.querySelector("div");x.dataset.abbrev=h.abbrev,x.dataset.hidden="",T.querySelector("rect").setAttribute("fill",h.color),T.querySelector("span").textContent=`${h.name}`,y.appendChild(T),x.addEventListener("dblclick",w=>{let C=[];x.dataset.hidden===""?Array.from(y.children).forEach(R=>{R.dataset.abbrev===h.abbrev?R.dataset.hidden="":(C.push(R.dataset.abbrev),R.dataset.hidden=!0)}):Array.from(y.children).forEach(R=>{R.dataset.hidden=""}),C.length?this.hide(...C):this.showAll(),w.preventDefault()}),x.addEventListener("click",w=>{x.dataset.hidden===""?(this.hide(h.abbrev),x.dataset.hidden="true"):(this.show(h.abbrev),x.dataset.hidden="")})})}};function yt(e){return new K(e)}return ht(xt);})();
//# sourceMappingURL=rates.min.js.map
