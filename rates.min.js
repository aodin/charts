var rates=(()=>{var U=Object.create;var D=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var M=(s,t,i)=>t in s?D(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var P=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),V=(s,t)=>{for(var i in t)D(s,i,{get:t[i],enumerable:!0})},O=(s,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of K(t))!L.call(s,e)&&e!==i&&D(s,e,{get:()=>t[e],enumerable:!(o=Z(t,e))||o.enumerable});return s};var u=(s,t,i)=>(i=s!=null?U(G(s)):{},O(t||!s||!s.__esModule?D(i,"default",{value:s,enumerable:!0}):i,s)),z=s=>O(D({},"__esModule",{value:!0}),s);var k=(s,t,i)=>M(s,typeof t!="symbol"?t+"":t,i);var g=P((q,R)=>{R.exports=d3});var B={};V(B,{Rates:()=>v});var d=u(g());var h=u(g());var N=u(g()),_=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.COLORS=N.schemeCategory10,this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.BACKGROUND_OPACITY=.3,this.DOT_RADIUS=3,this.BAR_STROKE_WIDTH=0,this.EVENT_FPS=48,Object.assign(this,t)}get eventLatency(){return parseInt(1e3/this.EVENT_FPS)}};var p=u(g());function w(s,{ratio:t=.2,maxWidth:i=1600,minWidth:o=400,minHeight:e=300}={}){let a=document.querySelector(s),r=p.min([a.offsetWidth,i]);r=p.max([a.offsetWidth,o]);let m=p.max([parseInt(t*r),e]);return[r,m]}function F(s,t,i,o,e){let a=p.select("body").append("svg").attr("width",100).attr("height",t).style("visibility","hidden"),r=p.scaleLinear().domain(i).range([t-s.bottom,s.top]),m=p.axisLeft(r).tickFormat(o).tickSize(0).ticks(8),n=a.append("g").style("font-size",e.FONT_SIZE).call(m).selectAll(".tick text"),x=0;return n.each(function(){let y=this.getBoundingClientRect();y.width>x&&(x=y.width)}),x+e.X_TICK_GUTTER+5}var T=class{constructor(t,i={}){k(this,"tickFormatX",null);k(this,"tickFormatY",null);this.options=new _(i),this.data=t,this.parse(t)}getMargin(t,i){return{top:15,right:15,bottom:25,left:45}}getTickValuesX(){return null}getTickValuesY(){return null}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let i=(o,e)=>!isNaN(this.X[e])&&!isNaN(this.Y[e]);this.D=h.map(t,i),this.I=h.range(this.X.length),this.grouping=h.group(this.I,o=>this.Z[o]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return h.map(t,i=>h.isoParse(i[0]))}parseY(t){return h.map(t,i=>i[1])}parseZ(t){return h.map(t,i=>i[2])}getDomainX(){return h.extent(this.X)}getRangeX(t,i){return[i.left,t.width-i.right]}getDomainY(){return h.extent(this.Y)}getRangeY(t,i){return[t.height-i.bottom,i.top]}setColors(t){this.colors=h.scaleOrdinal().domain(this.items).range(this.options.COLORS)}getColor(t){return this.colors(t)}getDimensions(t){return w(t,{ratio:.35})}createSVG(t,i){h.select(t).selectAll("svg").remove(),this.svg=h.select(t).append("svg").attr("viewBox",[0,0,i.width,i.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}clear(){this.svg&&this.svg.selectAll("*").remove()}};var f=u(g());var I=u(g()),nt=I.utcFormat("%b"),at=I.utcFormat("%b %-d"),ht=I.utcFormat("%b %Y"),lt=I.utcFormat("%b %-d, %Y"),ct=I.utcFormat("%B %-d, %Y");function E(s,t,i=0,o=1){let e=o-i,a=s.length>1?e/s.length:e/2;return d3.map(s,(r,m)=>t(o-a*m-a/2))}var xt=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}),Tt=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),yt=new Intl.NumberFormat("en-US",{maximumSignificantDigits:3}),kt=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",minimumFractionDigits:1,maximumFractionDigits:2}),It=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0,signDisplay:"exceptZero"}),Dt=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",minimumFractionDigits:2,maximumFractionDigits:3});var l=u(g());function C(s,t){var i=!0;return function(){i&&(s.apply(this,arguments),i=!1,setTimeout(()=>{i=!0},t))}}var Y=class extends T{render(t){if(!this.X.length)return;let[i,o]=this.getDimensions(t),e={width:i,height:o},a=this.getMargin(i,o);this.createSVG(t,e),this.xScale=l.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(e,a));let r=l.axisBottom(this.xScale).tickValues(this.getTickValuesX()).tickFormat(this.tickFormatX).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${e.height-a.bottom+this.options.Y_TICK_GUTTER})`).call(r).call(n=>n.select(".domain").remove()),this.yScale=l.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(e,a));let m=l.axisLeft(this.yScale).tickValues(this.getTickValuesY()).tickFormat(this.tickFormatY).tickSize(0).ticks(8);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${a.left-this.options.X_TICK_GUTTER},0)`).call(m).call(n=>n.select(".domain").remove()).call(n=>n.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("transform",`translate(${this.options.X_TICK_GUTTER},0)`).attr("x2",e.width-a.left-a.right));let S=l.line().defined(n=>this.D[n]).x(n=>this.xScale(this.X[n])).y(n=>this.yScale(this.Y[n]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",this.options.STROKE_WIDTH).selectAll("path").data(this.grouping).join("path").attr("d",([,n])=>S(n)).attr("stroke",([n])=>this.getColor(n)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}getLegend(){return l.map(this.items,t=>Object.assign({color:this.getColor(t.key)},t))}placeDot(t){let i=this.xScale(this.X[t]),o=this.yScale(this.Y[t]),e=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${i},${o})`),this.circle.attr("fill",this.getColor(e))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([i])=>i===t?1:this.options.BACKGROUND_OPACITY).attr("stroke-width",([i])=>i===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,i){let o=null,e=r=>{let[m,S]=l.pointer(r),n=l.least(this.I,b=>Math.hypot(this.xScale(this.X[b])-m,this.yScale(this.Y[b])-S));if(typeof n>"u"||o&&o==n)return;this.placeDot(n);let x=this.X[n],y=this.Y[n],X=this.Z[n],A={x,y,z:X,dx:this.xScale(x),dy:this.yScale(y),fx:this.formatX(x),fy:this.formatY(y),fz:this.formatZ(X)};t&&t.call(this,A)},a=r=>{this.hideDot(),i&&i.call(this)};this.svg.on("pointermove",C(e,this.options.eventLatency)).on("pointerleave",a).on("touchstart",r=>{e(r),r.preventDefault()})}};var c=u(g());var W=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"});function $(s){return`${parseInt(s.getUTCMonth()/3)+1}Q ${s.getUTCFullYear()}`}var v=class extends Y{constructor(){super(...arguments);k(this,"tickFormatY",d3.format(",.1%"));k(this,"tickFormatX",(i,o)=>i.getUTCFullYear())}getDimensions(i){return[document.querySelector(i).offsetWidth,window.innerHeight*.7]}getMargin(i,o){let e={top:15,right:15,bottom:15,left:15};return e.left=F(e,o,this.getDomainY(),this.tickFormatY,this.options),e}getTickValuesX(){let[i,o]=this.getDomainX(),e=d3.range(i.getUTCFullYear()+1,o.getUTCFullYear()+1);return d3.map(e,a=>new Date(a,2,31))}parse(i,o){let e=i.values;o&&o.size>0&&(e=i.values.filter(r=>!o.has(r[1]))),this.X=d3.map(e,r=>d3.isoParse(r[0])),this.Y=d3.map(e,r=>r[2]),this.Z=d3.map(e,r=>r[1]),this.items=i.items,this.byKey=Object.fromEntries(this.items.map(r=>[r.abbrev,r]));let a=(r,m)=>!isNaN(this.X[m])&&!isNaN(this.Y[m]);this.D=d3.map(e,a),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,r=>this.Z[r]),this.setColors(i)}hide(i,o){this.clear(),this.parse(this.data,new Set(i)),this.render(o)}setColors(i){let o=d3.map(this.items,a=>a.abbrev),e=E(o,d3.interpolateRainbow);this.colors=d3.scaleOrdinal().domain(o).range(e)}formatX(i){return $(i)}formatY(i){return W.format(i)}formatZ(i){return this.byKey[i].name}getLegend(){return d3.map(this.items,i=>Object.assign({color:this.getColor(i.abbrev)},i))}};return z(B);})();
//# sourceMappingURL=rates.min.js.map
