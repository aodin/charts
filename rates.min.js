var rates=(()=>{var P=Object.create;var C=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var V=(e,t,i)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),z=(e,t)=>{for(var i in t)C(e,i,{get:t[i],enumerable:!0})},N=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of G(t))!H.call(e,o)&&o!==i&&C(e,o,{get:()=>t[o],enumerable:!(s=L(t,o))||s.enumerable});return e};var p=(e,t,i)=>(i=e!=null?P(M(e)):{},N(t||!e||!e.__esModule?C(i,"default",{value:e,enumerable:!0}):i,e)),B=e=>N(C({},"__esModule",{value:!0}),e);var _=(e,t,i)=>V(e,typeof t!="symbol"?t+"":t,i);var c=W((tt,R)=>{R.exports=d3});var Q={};z(Q,{Rates:()=>b});var d=p(c());var r=p(c());var w=p(c()),Y=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_MAX_COUNT=null,this.X_TICK_SPACE=50,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_MAX_COUNT=null,this.Y_TICK_SPACE=40,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.COLORS=w.schemeCategory10,this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.BACKGROUND_OPACITY=.3,this.DOT_RADIUS=3,this.BAR_STROKE_WIDTH=0,this.EVENT_FPS=48,Object.assign(this,t)}get eventLatency(){return parseInt(1e3/this.EVENT_FPS)}getYTickCount(t){let i=parseInt(t/this.Y_TICK_SPACE)+1;return this.Y_TICK_MAX_COUNT&&i>this.Y_TICK_MAX_COUNT&&(i=this.Y_TICK_MAX_COUNT),i}getXTickCount(t){let i=parseInt(t/this.X_TICK_SPACE)+1;return this.X_TICK_MAX_COUNT&&i>this.X_TICK_MAX_COUNT&&(i=this.X_TICK_MAX_COUNT),i}};var u=p(c()),I=class{constructor(t,i,s,o){this.top=t,this.right=i,this.bottom=s,this.left=o}},X=class{constructor(t,i,s){this.width=t,this.height=i,this.padding=s}get rangeX(){return[this.padding.left,this.width-this.padding.right]}get rangeY(){return[this.height-this.padding.bottom,this.padding.top]}get innerWidth(){return this.width-this.padding.left-this.padding.right}get innerHeight(){return this.height-this.padding.top-this.padding.bottom}};function E(){return new X(window.innerWidth,window.innerHeight,new I(15,15,15,15))}function D(e,t,i,s,o){let a=u.select("body").append("svg").attr("width",100).attr("height",t).style("visibility","hidden"),n=u.scaleLinear().domain(i).range([t-e.bottom,e.top]),g=u.axisLeft(n).tickFormat(s).tickSize(0).ticks(8),m=a.append("g").style("font-size",o.FONT_SIZE).call(g).selectAll(".tick text"),f=0;return m.each(function(){let T=this.getBoundingClientRect();T.width>f&&(f=T.width)}),a.remove(),f+o.X_TICK_GUTTER+5}var x=class{constructor(t,i={}){_(this,"tickFormatX",null);_(this,"tickFormatY",null);this.options=new Y(i),this.data=t,this.parse(t)}getPadding(t){return new I(15,15,15,30)}getTickValuesX(){return null}getTickValuesY(){return null}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let i=(s,o)=>!isNaN(this.X[o])&&!isNaN(this.Y[o]);this.D=r.map(t,i),this.I=r.range(this.X.length),this.grouping=r.group(this.I,s=>this.Z[s]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return r.map(t,i=>r.isoParse(i[0]))}parseY(t){return r.map(t,i=>i[1])}parseZ(t){return r.map(t,i=>i[2])}getDomainX(){return r.extent(this.X)}getRangeX(t){return t.rangeX}getDomainY(){return r.extent(this.Y)}getRangeY(t){return t.rangeY}setColors(t){this.colors=r.scaleOrdinal().domain(this.items).range(this.options.COLORS)}getColor(t){return this.colors(t)}getLayout(t){let i=E();return i.height=parseInt(i.height*.7),i}createSVG(t,i){r.select(t).selectAll("svg").remove(),this.svg=r.select(t).append("svg").attr("viewBox",[0,0,i.width,i.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}clear(){this.svg&&this.svg.selectAll("*").remove()}};var y=p(c());var k=p(c()),lt=k.utcFormat("%b"),ct=k.utcFormat("%b %-d"),dt=k.utcFormat("%b %Y"),pt=k.utcFormat("%b %-d, %Y"),gt=k.utcFormat("%B %-d, %Y");function U(e,t,i=0,s=1){let o=s-i,a=e.length>1?o/e.length:o/2;return d3.map(e,(n,g)=>t(s-a*g-a/2))}var K=p(c()),_t=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}).format,It=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}).format,kt=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",minimumFractionDigits:1,maximumFractionDigits:2}).format,Ct=K.format(",.0f");var h=p(c());function v(e,t){var i=!0;return function(){i&&(e.apply(this,arguments),i=!1,setTimeout(()=>{i=!0},t))}}var S=class extends x{render(t){if(!this.X.length)return;this.layout=this.getLayout(t),this.layout.padding=this.getPadding(this.layout),this.createSVG(t,this.layout),this.xScale=h.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(this.layout));let i=h.axisBottom(this.xScale).tickValues(this.getTickValuesX()).tickFormat(this.tickFormatX).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${this.layout.height-this.layout.padding.bottom+this.options.Y_TICK_GUTTER})`).call(i).call(a=>a.select(".domain").remove()),this.yScale=h.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(this.layout));let s=h.axisLeft(this.yScale).tickValues(this.getTickValuesY()).tickFormat(this.tickFormatY).tickSize(0).ticks(8);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${this.layout.padding.left-this.options.X_TICK_GUTTER},0)`).call(s).call(a=>a.select(".domain").remove()).call(a=>a.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("transform",`translate(${this.options.X_TICK_GUTTER},0)`).attr("x2",this.layout.innerWidth));let o=h.line().defined(a=>this.D[a]).x(a=>this.xScale(this.X[a])).y(a=>this.yScale(this.Y[a]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",this.options.STROKE_WIDTH).selectAll("path").data(this.grouping).join("path").attr("d",([,a])=>o(a)).attr("stroke",([a])=>this.getColor(a)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}getLegend(){return h.map(this.items,t=>Object.assign({color:this.getColor(t.key)},t))}placeDot(t){let i=this.xScale(this.X[t]),s=this.yScale(this.Y[t]),o=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${i},${s})`),this.circle.attr("fill",this.getColor(o))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([i])=>i===t?1:this.options.BACKGROUND_OPACITY).attr("stroke-width",([i])=>i===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,i){let s=null,o=n=>{let[g,F]=h.pointer(n),m=h.least(this.I,A=>Math.hypot(this.xScale(this.X[A])-g,this.yScale(this.Y[A])-F));if(typeof m>"u"||s&&s==m)return;this.placeDot(m);let f=this.X[m],T=this.Y[m],O=this.Z[m],Z={x:f,y:T,z:O,dx:this.xScale(f),dy:this.yScale(T),fx:this.formatX(f),fy:this.formatY(T),fz:this.formatZ(O)};t&&t.call(this,Z)},a=n=>{this.hideDot(),i&&i.call(this)};this.svg.on("pointermove",v(o,this.options.eventLatency)).on("pointerleave",a).on("touchstart",n=>{o(n),n.preventDefault()})}};var l=p(c());var j=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"});function q(e){return`${parseInt(e.getUTCMonth()/3)+1}Q ${e.getUTCFullYear()}`}var b=class extends S{constructor(){super(...arguments);_(this,"tickFormatY",d3.format(",.1%"));_(this,"tickFormatX",(i,s)=>i.getUTCFullYear())}getPadding(i){return i.padding.left=D(i.padding,i.height,this.getDomainY(),this.tickFormatY,this.options),i.padding}getTickValuesX(){let[i,s]=this.getDomainX(),o=d3.range(i.getUTCFullYear()+1,s.getUTCFullYear()+1);return d3.map(o,a=>new Date(a,2,31))}parse(i,s){let o=i.values;s&&s.size>0&&(o=i.values.filter(n=>!s.has(n[1]))),this.X=d3.map(o,n=>d3.isoParse(n[0])),this.Y=d3.map(o,n=>n[2]),this.Z=d3.map(o,n=>n[1]),this.items=i.items,this.byKey=Object.fromEntries(this.items.map(n=>[n.abbrev,n]));let a=(n,g)=>!isNaN(this.X[g])&&!isNaN(this.Y[g]);this.D=d3.map(o,a),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,n=>this.Z[n]),this.setColors(i)}hide(i,s){this.clear(),this.parse(this.data,new Set(i)),this.render(s)}setColors(i){let s=d3.map(this.items,a=>a.abbrev),o=U(s,d3.interpolateRainbow);this.colors=d3.scaleOrdinal().domain(s).range(o)}formatX(i){return q(i)}formatY(i){return j.format(i)}formatZ(i){return this.byKey[i].name}getLegend(){return d3.map(this.items,i=>Object.assign({color:this.getColor(i.abbrev)},i))}};return B(Q);})();
//# sourceMappingURL=rates.min.js.map
