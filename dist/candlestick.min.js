var charts=(()=>{var $=Object.create;var m=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var j=(t,i,e)=>i in t?m(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var Z=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),K=(t,i)=>{for(var e in i)m(t,e,{get:i[e],enumerable:!0})},T=(t,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of G(i))!q.call(t,a)&&a!==e&&m(t,a,{get:()=>i[a],enumerable:!(s=z(i,a))||s.enumerable});return t};var w=(t,i,e)=>(e=t!=null?$(P(t)):{},T(i||!t||!t.__esModule?m(e,"default",{value:t,enumerable:!0}):e,t)),Q=t=>T(m({},"__esModule",{value:!0}),t);var k=(t,i,e)=>j(t,typeof i!="symbol"?i+"":i,e);var f=Z((ut,L)=>{L.exports=d3});var ht={};K(ht,{Candlestick:()=>b,OHLC:()=>rt,OHLCV:()=>ot,parseArray:()=>nt,parseVerboseObject:()=>at});var n=w(f());var u=w(f()),A=class{constructor(i,e,s,a){this.top=i,this.right=e,this.bottom=s,this.left=a}};function F(){return new A(15,15,25,25)}var x=class{constructor(i,e,s){this.width=i,this.height=e,this.pad=s||F()}get rangeX(){return[this.pad.left,this.width-this.pad.right]}get rangeY(){return[this.height-this.pad.bottom,this.pad.top]}get innerWidth(){return this.width-this.pad.left-this.pad.right}get innerHeight(){return this.height-this.pad.top-this.pad.bottom}get innerMinimum(){return u.min([this.innerWidth,this.innerHeight])}get midpoint(){return[this.width/2,this.height/2]}};function Y(t,{minWidth:i=400,maxWidth:e=void 0,minHeight:s=300,maxHeight:a=void 0,screenHeightFraction:h=.5}={}){let l=document.querySelector(t),o=u.max([l.offsetWidth,i]);e&&(o=u.min([o,e]));let r=window.innerHeight*h;return r=u.max([r,s]),a&&(r=u.min([r,a])),new x(o,r,F())}function H(t,i,e){return u.select(t).append("svg").attr("viewBox",[0,0,i,e]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("overflow","visible")}function y(t,i,e=null){let s=d3.select("body").append("svg").attr("width",t.innerWidth).attr("height",t.innerHeight).style("visibility","hidden"),a=d3.axisLeft(i).tickFormat(e),l=s.append("g").call(a).selectAll(".tick text"),o=0,r=0;return l.each(function(){let d=this.getBoundingClientRect();d.width>o&&(o=d.width),d.height>r&&(r=d.height)}),s.remove(),[o,r]}function _(t,i,e){let s=parseInt(i.innerWidth/(e+1))+1,a=d3.max([parseInt(Math.ceil(t.length/s)),1]);return d3.filter(t,(h,l)=>l%a===0)}var g=w(f()),mt=g.utcFormat("%b"),J=g.utcFormat("%b %-d"),ft=g.utcFormat("%b %Y"),tt=g.utcFormat("%b %-d, %Y"),xt=g.utcFormat("%B %-d, %Y");function v(){let t=null;return function(i){let e=i.getUTCFullYear();return t!==e?(t=e,tt(i)):J(i)}}function V(t,i){var e=!0;return function(){e&&(t.apply(this,arguments),e=!1,setTimeout(()=>{e=!0},i))}}var M=w(f()),wt=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}).format,vt=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}).format,Xt=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",minimumFractionDigits:1,maximumFractionDigits:2}).format,it=M.format(",.0f"),D=function(t){if(t)return t>=1e9?`${t/1e9}B`:t>=1e6?`${t/1e6}M`:it(t)};function et(t){return 1+Math.sign(t.o-t.c)}function R(t){return["bar",["up","even","down"][et(t)]].join(" ")}function st(t,i,e,s){let a=s-e+1,h=1;a<t.length&&(h=t.length/a);let l=e/t.length,o=i*h,r=l*o;return[0-r,o-r]}function U(t,i=0,e){return e&&(t=t.slice(i,e+1)),[n.min(n.map(t,a=>a.l)),n.max(n.map(t,a=>a.h))]}function nt(t){return{x:n.isoParse(t[0]),o:t[1],h:t[2],l:t[3],c:t[4],v:t[5]}}function at(t){return{x:n.isoParse(t.date),o:t.open,h:t.high,l:t.low,c:t.close,v:t.volume}}function O(t,i){let e=t.domain(),s=t(e[0]),a=t.step(),h=Math.floor((i-s)/a);return Math.max(0,Math.min(h,e.length-1))}var b=class{constructor(i,e=s=>s){k(this,"formatX","%m %d, %Y");this.config={VOLUME_RATIO:0,LOG_Y:!1,SCREEN_HEIGHT_FRACTION:.5,BAND_PAD:.2,DURATION_MS:500,VOLUME_AXIS_RIGHT:!0,HIDE_VOLUME_AXIS:!1},this.data=n.map(i,e),this.X=n.map(this.data,s=>s.x)}get volumeAxesIsVisible(){return!!this.config.VOLUME_RATIO&&!this.config.HIDE_VOLUME_AXIS}get volumeAxesVisibility(){return this.volumeAxesIsVisible?"visible":"hidden"}append(){}animationDuration(i){return this.config.DURATION_MS=i,this}noAnimation(){return this.animationDuration(0)}showVolume(i=.1){return this.config.VOLUME_RATIO=i,this}hideVolume(){return this.showVolume(0)}hideVolumeAxis(){return this.config.HIDE_VOLUME_AXIS=!0,this}defaultLog(){return this.config.LOG_Y=!0,this}defaultLinear(){return this.config.LOG_Y=!1,this}screenHeightFraction(i){return this.config.SCREEN_HEIGHT_FRACTION=i,this}render(i){let e=n.select(i);if(!e.node())throw new Error(`Unable to find a DOM element for selector '${i}'`);if(e.node().tagName==="svg"){this.svg=e;let c=+this.svg.attr("width"),I=+this.svg.attr("height");c&&I?this.layout=new x(c,I):this.layout=Y(i,{screenHeightFraction:this.config.SCREEN_HEIGHT_FRACTION})}else this.layout=Y(i,{screenHeightFraction:this.config.SCREEN_HEIGHT_FRACTION}),this.svg=H(i,this.layout.width,this.layout.height);let s=this.layout.innerHeight*this.config.VOLUME_RATIO,a=this.layout.innerHeight-s,h=n.max(n.map(this.data,c=>c.v));if(this.scaleVolume=n.scaleLinear().domain([0,h]).range([s,0]).clamp(!0).nice(),this.volumeAxesIsVisible){let[c,I]=y(this.layout,this.scaleVolume,D);this.layout.pad.right=c+5}let l=U(this.data),o=l[0],r=[a,0];this.scaleLog=n.scaleLog().domain(l).range(r).clamp(!0),this.scaleLinear=n.scaleLinear().domain(l).range(r).clamp(!0);let[d,p]=y(this.layout,this.scaleLog),[N,lt]=y(this.layout,this.scaleLinear),E=n.max([d,N]);this.layout.pad.left=E+5,this.svg.append("defs").append("clipPath").attr("id","inner-clip-path").append("rect").attr("width",this.layout.innerWidth).attr("height",this.layout.innerHeight),this.inner=this.svg.append("g").attr("transform",`translate(${this.layout.pad.left}, ${this.layout.pad.top})`),this.scaleX=n.scaleBand(this.X,[0,this.layout.innerWidth]).paddingInner(this.config.BAND_PAD).align(.5);let X=v(),[S,ct]=y(this.layout,this.scaleX,X);this.labelWidthX=S;let B=_(this.X,this.layout,S);X=v(),this.scaleY=this.config.LOG_Y?this.scaleLog:this.scaleLinear;let C=n.axisLeft(this.scaleY).tickSize(0);this.axisX=n.axisBottom(this.scaleX).tickValues(B).tickFormat(X).tickSize(3),this.gPrice=this.inner.append("g").attr("class","y axis").call(C),this.grid=this.inner.append("g").attr("class","grid");let W=this.scaleX.bandwidth()*this.config.BAND_PAD/2;this.gx=this.inner.append("g").attr("class","x axis").attr("transform",`translate(${W+.5},${this.layout.innerHeight})`).call(this.axisX),this.candles=this.inner.append("g").attr("clip-path","url(#inner-clip-path)").attr("stroke","currentColor").attr("stroke-linecap","butt").selectAll("g").data(this.data).join("g").attr("transform",c=>`translate(${this.scaleX(c.x)+this.scaleX.step()/2},0)`),this.wicks=this.candles.append("line").attr("stroke","currentColor").attr("stroke-width",1).attr("class","wick").attr("opacity",.8).attr("y1",this.scaleY(o)).attr("y2",this.scaleY(o)),this.bars=this.candles.append("line").attr("stroke-width",this.scaleX.bandwidth()).attr("class",c=>R(c)).attr("y1",this.scaleY(o)).attr("y2",this.scaleY(o)),this.updateY(),this.axisVolume=n.axisRight(this.scaleVolume).ticks(1).tickFormat(D).tickSize(3),this.volume=this.inner.append("g").attr("class","volume").attr("transform",`translate(0,${this.layout.innerHeight-s})`),this.volume.append("g").attr("transform",`translate(${this.layout.innerWidth},0)`).call(this.axisVolume).attr("visibility",this.volumeAxesVisibility),this.volumeSlots=this.volume.append("g").attr("stroke","currentColor").attr("stroke-linecap","butt").selectAll("g").data(this.data).join("g").attr("transform",c=>`translate(${this.scaleX(c.x)+this.scaleX.step()/2},0)`),this.volumeBars=this.volumeSlots.append("line").attr("y1",this.scaleVolume(0)).attr("y2",this.scaleVolume(0)).attr("stroke-width",this.scaleX.bandwidth()).attr("class",c=>R(c)),this.volumeBars.transition().duration(this.config.DURATION_MS).attr("y2",c=>this.scaleVolume(c.v||0)),this.brush=n.brushX().extent([[0,0],[this.layout.innerWidth,this.layout.innerHeight]]).on("end",this.zoom.bind(this)),this.gBrush=this.inner.append("g").attr("class","brush").call(this.brush.bind(this)),this.spotlightBar=this.inner.append("g").lower().attr("class","spotlight").append("rect").style("display","none").style("pointer-events","none")}updateY(){let i=n.axisLeft(this.scaleY);this.gPrice.transition().duration(this.config.DURATION_MS).call(i.tickSize(0)),this.grid.transition().duration(this.config.DURATION_MS).call(i.ticks().tickFormat("").tickSize(-this.layout.innerWidth)),this.bars.transition().duration(this.config.DURATION_MS).attr("y1",e=>this.scaleY(e.o)).attr("y2",e=>this.scaleY(e.c)),this.wicks.transition().duration(this.config.DURATION_MS).attr("y1",e=>this.scaleY(e.l)).attr("y2",e=>this.scaleY(e.h))}useLog(){this.scaleY=this.scaleLog,this.updateY()}useLinear(){this.scaleY=this.scaleLinear,this.updateY()}spotlight(i){this.spotlightBar.attr("x",this.scaleX(this.data[i].x)).attr("width",this.scaleX.step()).attr("y",0).attr("height",this.layout.innerHeight).style("display","block")}noSpotlight(){this.spotlightBar.style("display","none")}onEvent(i,e){let s=null,a=l=>{let[o]=n.pointer(l),r=O(this.scaleX,o-this.layout.pad.left);if(s&&s==r)return;s=r;let d=structuredClone(this.data[r]);if(d.index=r,r>0){let p=this.data[r-1];p&&p.c&&(d.prev=p.c,d.delta=d.c-p.c,d.percent=d.delta/p.c)}i&&i.call(this,d)},h=l=>{s=null,e&&e.call(this)};this.svg.on("pointermove",V(a,20.83)).on("pointerleave",h)}updateX(i,e){let s=st(this.scaleX.domain(),this.layout.innerWidth,i,e);this.scaleX.range(s);let a=U(this.data,i,e),h=_(this.X.slice(i,e+1),this.layout,this.labelWidthX),l=v();this.axisX.tickValues(h).tickFormat(l);let o=this.scaleX.bandwidth()*this.config.BAND_PAD/2;this.gx.transition().duration(this.config.DURATION_MS).attr("transform",`translate(${o+.5},${this.layout.innerHeight})`).call(this.axisX),this.candles.transition().duration(this.config.DURATION_MS).attr("transform",r=>`translate(${this.scaleX(r.x)+this.scaleX.step()/2},0)`),this.bars.transition().duration(this.config.DURATION_MS).attr("stroke-width",this.scaleX.bandwidth()),this.spotlightBar.transition().duration(this.config.DURATION_MS).attr("width",this.scaleX.step()),this.volumeSlots.transition().duration(this.config.DURATION_MS).attr("transform",r=>`translate(${this.scaleX(r.x)+this.scaleX.step()/2},0)`),this.volumeBars.transition().duration(this.config.DURATION_MS).attr("stroke-width",this.scaleX.bandwidth())}zoom({selection:i}){if(!i)return;let[e,s]=i,[a,h]=[O(this.scaleX,e),O(this.scaleX,s)];this.updateX(a,h),this.gBrush.call(this.brush.move,null)}reset(){this.updateX(0,this.data.length-1)}};function rt(t,i){return new b(t,i)}function ot(t,i){return new b(t,i).showVolume()}return Q(ht);})();
//# sourceMappingURL=candlestick.min.js.map
