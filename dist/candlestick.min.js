var charts=(()=>{var P=Object.create;var y=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,Z=Object.prototype.hasOwnProperty;var K=(i,t,e)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Q=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),J=(i,t)=>{for(var e in t)y(i,e,{get:t[e],enumerable:!0})},H=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of q(t))!Z.call(i,r)&&r!==e&&y(i,r,{get:()=>t[r],enumerable:!(s=z(t,r))||s.enumerable});return i};var L=(i,t,e)=>(e=i!=null?P(j(i)):{},H(t||!i||!i.__esModule?y(e,"default",{value:i,enumerable:!0}):e,i)),tt=i=>H(y({},"__esModule",{value:!0}),i);var O=(i,t,e)=>K(i,typeof t!="symbol"?t+"":t,e);var w=Q((gt,T)=>{T.exports=d3});var lt={};J(lt,{Candlestick:()=>D,OHLC:()=>ot,OHLCV:()=>ht,parseArray:()=>st,parseVerboseObject:()=>rt});var n=L(w());var c=L(w()),A=class{constructor(t,e,s,r){this.top=t,this.right=e,this.bottom=s,this.left=r}};function E(){return new A(15,15,25,25)}var b=class{constructor(t,e,s){this.width=t,this.height=e,this.padding=s||E()}get rangeX(){return[this.padding.left,this.width-this.padding.right]}get rangeY(){return[this.height-this.padding.bottom,this.padding.top]}get innerWidth(){return this.width-this.padding.left-this.padding.right}get innerHeight(){return this.height-this.padding.top-this.padding.bottom}get innerMinimum(){return c.min([this.innerWidth,this.innerHeight])}get midpoint(){return[this.width/2,this.height/2]}};function k(i,{minWidth:t=400,maxWidth:e=void 0,minHeight:s=300,maxHeight:r=void 0,screenHeightFraction:d=.5}={}){let h=document.querySelector(i),l=c.max([h.offsetWidth,t]);e&&(l=c.min([l,e]));let o=window.innerHeight*d;return o=c.max([o,s]),r&&(o=c.min([o,r])),new b(l,o,E())}function V(i,t,e){return c.select(i).append("svg").attr("viewBox",[0,0,t,e]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("overflow","visible")}function I(i,t,e=null){let s=d3.select("body").append("svg").attr("width",i.innerWidth).attr("height",i.innerHeight).style("visibility","hidden"),r=d3.axisLeft(t).tickFormat(e),h=s.append("g").call(r).selectAll(".tick text"),l=0,o=0;return h.each(function(){let u=this.getBoundingClientRect();u.width>l&&(l=u.width),u.height>o&&(o=u.height)}),s.remove(),[l,o]}function X(i,t,e){let s=parseInt(t.innerWidth/(e+1))+1,r=d3.max([parseInt(Math.ceil(i.length/s)),1]);return d3.filter(i,(d,h)=>h%r===0)}var x=L(w()),xt=x.utcFormat("%b"),it=x.utcFormat("%b %-d"),yt=x.utcFormat("%b %Y"),et=x.utcFormat("%b %-d, %Y"),wt=x.utcFormat("%B %-d, %Y");function S(){let i=null;return function(t){let e=t.getUTCFullYear();return i!==e?(i=e,et(t)):it(t)}}function N(i,t){var e=!0;return function(){e&&(i.apply(this,arguments),e=!1,setTimeout(()=>{e=!0},t))}}var U=L(w()),Dt=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}).format,Lt=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}).format,_t=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",minimumFractionDigits:1,maximumFractionDigits:2}).format,nt=U.format(",.0f"),F=function(i){if(i)return i>=1e9?`${i/1e9}B`:i>=1e6?`${i/1e6}M`:nt(i)};function at(i){return 1+Math.sign(i.o-i.c)}function Y(i){return["bar",["up","even","down"][at(i)]].join(" ")}function st(i){return{x:n.isoParse(i[0]),o:i[1],h:i[2],l:i[3],c:i[4],v:i[5]}}function rt(i){return{x:n.isoParse(i.date),o:i.open,h:i.high,l:i.low,c:i.close,v:i.volume}}var D=class{constructor(t,e=s=>s){O(this,"formatX","%m %d, %Y");this.config={VOLUME_RATIO:0,LOG_Y:!1,SCREEN_HEIGHT_FRACTION:.5,BAND_PADDING:.2,DURATION_MS:500,VOLUME_AXIS_RIGHT:!0,HIDE_VOLUME_AXIS:!1},this.data=n.map(t,e)}append(){}animationDuration(t){return this.config.DURATION_MS=t,this}noAnimation(){return this.animationDuration(0)}showVolume(t=.1){return this.config.VOLUME_RATIO=t,this}hideVolume(){return this.showVolume(0)}hideVolumeAxis(){return this.config.HIDE_VOLUME_AXIS=!0,this}defaultLog(){return this.config.LOG_Y=!0,this}defaultLinear(){return this.config.LOG_Y=!1,this}screenHeightFraction(t){return this.config.SCREEN_HEIGHT_FRACTION=t,this}render(t){let e=n.select(t);if(!e.node())throw new Error(`Unable to find a DOM element for selector '${t}'`);if(e.node().tagName==="svg"){this.svg=e;let a=+this.svg.attr("width"),v=+this.svg.attr("height");a&&v?this.layout=new b(a,v):this.layout=k(t,{screenHeightFraction:this.config.SCREEN_HEIGHT_FRACTION})}else this.layout=k(t,{screenHeightFraction:this.config.SCREEN_HEIGHT_FRACTION}),this.svg=V(t,this.layout.width,this.layout.height);let s=this.layout.innerHeight*this.config.VOLUME_RATIO,r=this.layout.innerHeight-s,d=n.max(n.map(this.data,a=>a.v));if(this.scaleVolume=n.scaleLinear().domain([0,d]).range([s,0]).clamp(!0).nice(),!this.config.HIDE_VOLUME_AXIS){let[a,v]=I(this.layout,this.scaleVolume,F);this.layout.padding.right=a+5}let h=n.min(n.map(this.data,a=>a.l)),l=[h,n.max(n.map(this.data,a=>a.h))],o=[r,0];this.scaleLog=n.scaleLog().domain(l).range(o).clamp(!0),this.scaleLinear=n.scaleLinear().domain(l).range(o).clamp(!0);let u=n.map(this.data,a=>a.x),[p,g]=I(this.layout,this.scaleLog),[m,ct]=I(this.layout,this.scaleLinear),C=n.max([p,m]);this.layout.padding.left=C+5,this.inner=this.svg.append("g").attr("transform",`translate(${this.layout.padding.left}, ${this.layout.padding.top})`),this.price=this.inner.append("g").attr("class","price"),this.volume=this.inner.append("g").attr("transform",`translate(0,${this.layout.innerHeight-s})`).attr("class","volume"),this.scaleX=n.scaleBand(u,[0,this.layout.innerWidth]).paddingInner(this.config.BAND_PADDING).align(.5);let _=S(),[M,dt]=I(this.layout,this.scaleX,_),R=n.map(this.data,a=>a.x),B=X(R,this.layout,M);_=S();let f=this.config.LOG_Y?this.scaleLog:this.scaleLinear,G=n.axisLeft(f).tickSize(0),W=n.axisBottom(this.scaleX).tickValues(B).tickFormat(_).tickSize(3);this.elemAxisPrice=this.inner.append("g").attr("class","y axis").attr("transform","translate(0,0)").call(G).call(a=>a.selectAll(".tick line").clone().attr("stroke","#bbb").attr("stroke-opacity",.5).attr("x1",0).attr("x2",this.layout.innerWidth));let $=this.scaleX.bandwidth()*this.config.BAND_PADDING/2,ut=this.inner.append("g").attr("class","x axis").attr("transform",`translate(${$+.5},${this.layout.innerHeight})`).call(W);this.candles=this.inner.append("g").attr("stroke","currentColor").attr("stroke-linecap","butt").selectAll("g").data(this.data).join("g").attr("transform",a=>`translate(${this.scaleX(a.x)+this.scaleX.step()/2},0)`),this.wicks=this.candles.append("line").attr("stroke","currentColor").attr("stroke-width",1).attr("class","wick").attr("opacity",.8).attr("y1",f(h)).attr("y2",f(h)),this.bars=this.candles.append("line").attr("stroke-width",this.scaleX.bandwidth()).attr("class",a=>Y(a)).attr("y1",f(h)).attr("y2",f(h)),this.updateScale(f),s&&(this.axisVolume=n.axisRight(this.scaleVolume).ticks(1).tickFormat(F).tickSize(3),this.config.HIDE_VOLUME_AXIS||this.volume.append("g").attr("transform",`translate(${this.layout.innerWidth},0)`).call(this.axisVolume),this.volumeBars=this.volume.append("g").attr("stroke","currentColor").attr("stroke-linecap","butt").selectAll("g").data(this.data).join("g").attr("transform",a=>`translate(${this.scaleX(a.x)+this.scaleX.step()/2},0)`),this.volumeBars.append("line").attr("y1",this.scaleVolume(0)).attr("y2",this.scaleVolume(0)).attr("stroke-width",this.scaleX.bandwidth()).attr("class",a=>Y(a)).transition().duration(this.config.DURATION_MS).attr("y2",a=>this.scaleVolume(a.v||0))),this.spotlightBar=this.inner.append("g").lower().attr("class","spotlight").append("rect").style("display","none").style("pointer-events","none")}updateScale(t){this.elemAxisPrice.transition().duration(this.config.DURATION_MS).call(n.axisLeft(t).tickSize(0)),this.bars.transition().duration(this.config.DURATION_MS).attr("y1",e=>t(e.o)).attr("y2",e=>t(e.c)),this.wicks.transition().duration(this.config.DURATION_MS).attr("y1",e=>t(e.l)).attr("y2",e=>t(e.h))}useLog(){this.updateScale(this.scaleLog)}useLinear(){this.updateScale(this.scaleLinear)}spotlight(t){this.spotlightBar.attr("x",this.scaleX(this.data[t].x)).attr("width",this.scaleX.step()).attr("y",0).attr("height",this.layout.innerHeight).style("display","block")}noSpotlight(){this.spotlightBar.style("display","none")}onEvent(t,e){let s=n.map(this.data,o=>[this.scaleX(o.x)+this.scaleX.step()/2+this.layout.padding.left,1]),r=n.Delaunay.from(s),d=null,h=o=>{let[u]=n.pointer(o),p=r.find(u,1);if(d&&d==p)return;d=p;let g=structuredClone(this.data[p]);if(g.index=p,p>0){let m=this.data[p-1];m&&m.c&&(g.prev=m.c,g.delta=g.c-m.c,g.percent=g.delta/m.c)}t&&t.call(this,g)},l=o=>{d=null,e&&e.call(this)};this.svg.on("pointermove",N(h,20.83)).on("pointerleave",l)}};function ot(i,t){return new D(i,t)}function ht(i,t){return new D(i,t).showVolume()}return tt(lt);})();
//# sourceMappingURL=candlestick.min.js.map
