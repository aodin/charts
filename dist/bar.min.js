var charts=(()=>{var h=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var k=(s,t,e)=>t in s?h(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var D=(s,t)=>{for(var e in t)h(s,e,{get:t[e],enumerable:!0})},S=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of I(t))!Y.call(s,r)&&r!==e&&h(s,r,{get:()=>t[r],enumerable:!(i=f(t,r))||i.enumerable});return s};var y=s=>S(h({},"__esModule",{value:!0}),s);var m=(s,t,e)=>k(s,typeof t!="symbol"?t+"":t,e);var C={};D(C,{Bar:()=>p});var l=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.BACKGROUND_OPACITY=.3,this.DOT_RADIUS=3,this.BAR_STROKE_WIDTH=0,this.EVENT_FPS=48,Object.assign(this,t)}get eventLatency(){return parseInt(1e3/this.EVENT_FPS)}};function u(s,{ratio:t=.2,maxWidth:e=1600,minWidth:i=400,minHeight:r=300}={}){let n=document.querySelector(s),a=d3.min([n.offsetWidth,e]);a=d3.max([n.offsetWidth,i]);let d=d3.max([parseInt(t*a),r]);return[a,d]}var c=class{constructor(t,e={}){m(this,"tickFormatX",null);m(this,"tickFormatY",null);this.options=new l(e),this.data=t,this.parse(t)}getMargin(t,e){return{top:15,right:15,bottom:25,left:45}}getTickValuesX(){return null}getTickValuesY(){return null}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let e=(i,r)=>!isNaN(this.X[r])&&!isNaN(this.Y[r]);this.D=d3.map(t,e),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,i=>this.Z[i]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return d3.map(t,e=>d3.isoParse(e[0]))}parseY(t){return d3.map(t,e=>e[1])}parseZ(t){return d3.map(t,e=>e[2])}getDomainX(){return d3.extent(this.X)}getRangeX(t,e){return[e.left,t.width-e.right]}getDomainY(){return d3.extent(this.Y)}getRangeY(t,e){return[t.height-e.bottom,e.top]}setColors(t){this.colors=d3.scaleOrdinal().domain(this.items).range(d3.schemeCategory10)}getColor(t){return this.colors(t)}getDimensions(t){return u(t,{ratio:.35})}createSVG(t,e){d3.select(t).selectAll("svg").remove(),this.svg=d3.select(t).append("svg").attr("viewBox",[0,0,e.width,e.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}};var Z=d3.utcFormat("%b"),E=d3.utcFormat("%b %-d"),v=d3.utcFormat("%b %Y"),F=d3.utcFormat("%b %-d, %Y"),K=d3.utcFormat("%B %-d, %Y");function T(){let s=null;return function(t){let e=t.getUTCFullYear();return s!==e?(s=e,F(t)):E(t)}}var p=class extends c{parse(t){this.Z=this.parseZ(t),this.items=new Set(this.Z);let e=d3.index(t,i=>d3.isoParse(i[0]),i=>i[2]);this.stack=d3.stack().keys(this.items).value(([,i],r)=>{let n=i.get(r);return n?n[1]:0})(e),this.X=[...e.keys()],this.Y=[0,d3.max(this.stack[this.stack.length-1],i=>i[1])],this.setColors(t)}getDomainX(){return new Set(this.X)}getDomainY(){return this.Y}render(t){let[e,i]=this.getDimensions(t),r={width:e,height:i},n=this.getMargin(e,i);this.createSVG(t,r);let a=d3.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(r,n)),d=d3.axisLeft(a).tickValues(this.getTickValuesY()).tickFormat(this.tickFormatY).tickSize(0).ticks(8);console.log();let g=d3.scaleBand().domain(this.getDomainX()).range(this.getRangeX(r,n)).padding(this.options.BAND_PADDING).align(.1),_=T(),x=d3.axisBottom(g).tickFormat(_).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${r.height-n.bottom+this.options.X_TICK_GUTTER})`).call(x).call(o=>o.select(".domain").remove()),this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${n.left-this.options.Y_TICK_GUTTER},0)`).call(d).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("x1",this.options.Y_TICK_GUTTER).attr("x2",r.width-n.right-n.left+this.options.Y_TICK_GUTTER).attr("stroke-opacity",.1)),this.svg.append("g").selectAll().data(this.stack).join("g").attr("fill",o=>this.getColor(o.key)).selectAll("rect").data(o=>o).join("rect").attr("stroke","white").attr("stroke-width",this.options.BAR_STROKE_WIDTH).attr("x",o=>g(o.data[0])).attr("y",o=>a(o[1])).attr("height",o=>a(o[0])-a(o[1])).attr("width",g.bandwidth())}};return y(C);})();
//# sourceMappingURL=bar.min.js.map
