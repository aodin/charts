var charts=(()=>{var D=Object.create;var u=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var y=(s,t,i)=>t in s?u(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var K=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),v=(s,t)=>{for(var i in t)u(s,i,{get:t[i],enumerable:!0})},N=(s,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of M(t))!w.call(s,r)&&r!==i&&u(s,r,{get:()=>t[r],enumerable:!(n=H(t,r))||n.enumerable});return s};var T=(s,t,i)=>(i=s!=null?D(x(s)):{},N(t||!s||!s.__esModule?u(i,"default",{value:s,enumerable:!0}):i,s)),b=s=>N(u({},"__esModule",{value:!0}),s);var O=(s,t,i)=>y(s,typeof t!="symbol"?t+"":t,i);var _=K((G,f)=>{f.exports=d3});var V={};v(V,{Donut:()=>Z,Pie:()=>L,PieChart:()=>g});var a=T(_());var e=T(_());var S=T(_()),R=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.SCREEN_HEIGHT_FRACTION=.65,this.X_TICK_MAX_COUNT=null,this.X_TICK_SPACE=50,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_MAX_COUNT=null,this.Y_TICK_SPACE=40,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.COLORS=S.schemeCategory10,this.MIN_Y_AT_ZERO=!1,this.Y_TICKS_RIGHT=!1,this.BAND_PAD=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.VOLUME_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.HIDE_VOLUME=!1,this.HIDE_VOLUME_TICKS=!1,this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.BACKGROUND_OPACITY=.3,this.DOT_RADIUS=3,this.BAR_STROKE_WIDTH=0,this.INNER_RADIUS=.3,this.OUTER_RADIUS=.8,this.INNER_RADIUS_HOVER=.3,this.OUTER_RADIUS_HOVER=.9,this.EVENT_FPS=48,Object.assign(this,t)}get eventLatency(){return parseInt(1e3/this.EVENT_FPS)}get showVolumeTicks(){return!(this.HIDE_VOLUME||this.HIDE_VOLUME_TICKS)}getYTickCount(t){let i=parseInt(t/this.Y_TICK_SPACE)+1;return this.Y_TICK_MAX_COUNT&&i>this.Y_TICK_MAX_COUNT&&(i=this.Y_TICK_MAX_COUNT),i}getXTickCount(t){let i=parseInt(t/this.X_TICK_SPACE)+1;return this.X_TICK_MAX_COUNT&&i>this.X_TICK_MAX_COUNT&&(i=this.X_TICK_MAX_COUNT),i}};var o=T(_()),E=class{constructor(t,i,n,r){this.top=t,this.right=i,this.bottom=n,this.left=r}};function U(){return new E(15,15,25,25)}var A=class{constructor(t,i,n){this.width=t,this.height=i,this.pad=n||U()}get rangeX(){return[this.pad.left,this.width-this.pad.right]}get rangeY(){return[this.height-this.pad.bottom,this.pad.top]}get innerWidth(){return this.width-this.pad.left-this.pad.right}get innerHeight(){return this.height-this.pad.top-this.pad.bottom}get innerMinimum(){return o.min([this.innerWidth,this.innerHeight])}get midpoint(){return[this.width/2,this.height/2]}};function X(s,{minWidth:t=400,maxWidth:i=void 0,minHeight:n=300,maxHeight:r=void 0,screenHeightFraction:l=.5}={}){let h=document.querySelector(s),d=o.max([h.offsetWidth,t]);i&&(d=o.min([d,i]));let c=window.innerHeight*l;return c=o.max([c,n]),r&&(c=o.min([c,r])),new A(d,c,U())}function Y(s,t,i,n,r){let l=o.select("body").append("svg").attr("width",100).attr("height",t).style("visibility","hidden"),h=o.scaleLinear().domain(i).range([t-s.bottom,s.top]),d=o.axisLeft(h).tickFormat(n).tickSize(0).ticks(8),p=l.append("g").style("font-size",r.FONT_SIZE).call(d).selectAll(".tick text"),I=0;return p.each(function(){let C=this.getBoundingClientRect();C.width>I&&(I=C.width)}),l.remove(),I+r.X_TICK_GUTTER+5}var m=class{constructor(t,i={}){O(this,"tickFormatX",null);O(this,"tickFormatY",null);this.options=new R(i),this.data=t,this.parse(t)}screenHeightRatio(t){return this.options.SCREEN_HEIGHT_FRACTION=t,this}minAtZero(){return this.options.MIN_Y_AT_ZERO=!0,this}colorSet(t){return this.options.COLORS=t,this.setColors(),this}yTicksRight(){return this.options.Y_TICKS_RIGHT=!0,this}yTickLimit(t){return this.options.Y_TICK_MAX_COUNT=t,this}getTickValuesX(){return null}getTickValuesY(){return null}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let i=(n,r)=>!isNaN(this.X[r])&&!isNaN(this.Y[r]);this.D=e.map(t,i),this.I=e.range(this.X.length),this.grouping=e.group(this.I,n=>this.Z[n]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return e.map(t,i=>e.isoParse(i[0]))}parseY(t){return e.map(t,i=>i[1])}parseZ(t){return e.map(t,i=>i[2])}getDomainX(){return e.extent(this.X)}getRangeX(t){return t.rangeX}getDomainY(){return this.options.MIN_Y_AT_ZERO?[0,e.max(this.Y)]:e.extent(this.Y)}getRangeY(t){return t.rangeY}setColors(t){this.colors=e.scaleOrdinal().domain(this.items).range(this.options.COLORS)}getColor(t){return this.colors(t)}getLayout(t){return X(t,{screenHeightFraction:this.options.SCREEN_HEIGHT_FRACTION})}getPad(t){let i=Y(t.pad,t.height,this.getDomainY(),this.tickFormatY,this.options);return this.options.Y_TICKS_RIGHT?t.pad.right=i:t.pad.left=i,t.pad}createSVG(t,i){e.select(t).selectAll("svg").remove(),this.svg=e.select(t).append("svg").attr("viewBox",[0,0,i.width,i.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}clear(){this.svg&&this.svg.selectAll("*").remove()}};var g=class extends m{radii(t,i){return this.options.INNER_RADIUS=t,this.options.OUTER_RADIUS=i,this}hoverRadii(t,i){return this.options.INNER_RADIUS_HOVER=t,this.options.OUTER_RADIUS_HOVER=i,this}get outerRadius(){return this.options.OUTER_RADIUS*(this.layout.innerMinimum/2)}get innerRadius(){return this.options.INNER_RADIUS*(this.layout.innerMinimum/2)}get outerRadiusHover(){return this.options.OUTER_RADIUS_HOVER*(this.layout.innerMinimum/2)}get innerRadiusHover(){return this.options.INNER_RADIUS_HOVER*(this.layout.innerMinimum/2)}getX(t){return t[0]}getY(t){return t[1]}getZ(t){return t[2]}render(t){if(!this.X.length)return;this.layout=this.getLayout(t),this.layout.pad=this.getPad(this.layout),this.createSVG(t,this.layout);let i=a.max(a.map(this.data,this.getX)),n=a.filter(this.data,p=>this.getX(p)===i),l=a.pie().sort(null).value(this.getY)(n);this.arc=a.arc().innerRadius(this.innerRadius).outerRadius(this.outerRadius),this.arcEnlarge=a.arc().innerRadius(this.innerRadiusHover).outerRadius(this.outerRadiusHover);let[h,d]=this.layout.midpoint,c=this.svg.append("g").attr("transform",`translate(${h},${d})`);this.slice=c.selectAll(".arc").data(l).enter().append("g").attr("class","arc"),this.slice.append("path").attr("d",this.arc).attr("opacity",1).attr("fill",(p,I)=>this.getColor(this.getZ(p.data))),this.slice.append("text").attr("transform",p=>`translate(${this.arc.centroid(p)})`)}enlarge(t){this.slice.selectAll("path").filter(i=>this.getZ(i.data)===t).transition().duration(this.options.ANIMATION_DURATION_MS).attr("d",this.arcEnlarge)}reset(){this.slice.selectAll("path").transition().duration(this.options.ANIMATION_DURATION_MS).attr("d",this.arc)}getLegend(){return a.map(new Set(this.Z),t=>Object.assign({color:this.getColor(t.key)},t))}noHighlight(){this.slice.transition().duration(this.options.ANIMATION_DURATION_MS).attr("opacity",1)}highlight(t){this.slice.attr("opacity",1).transition().duration(this.options.ANIMATION_DURATION_MS).attr("opacity",i=>this.getZ(i.data)===t?1:.5)}enableEvents(t,i){let n=(l,h)=>{let d={x:this.getX(h.data),y:this.getY(h.data),z:this.getZ(h.data)};t&&t.call(this,d,l,h)},r=(l,h)=>{let d={x:this.getX(h.data),y:this.getY(h.data),z:this.getZ(h.data)};i&&i.call(this,d,l,h)};this.slice.on("pointerenter",n).on("pointerleave",r)}};function Z(s,t){return new g(s,t)}function L(s,t){return new g(s,t).radii(0,.8).hoverRadii(0,.9)}return b(V);})();
//# sourceMappingURL=pie.min.js.map
