var charts=(()=>{var G=Object.create;var A=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty;var W=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),B=(i,t)=>{for(var e in t)A(i,e,{get:t[e],enumerable:!0})},T=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of z(t))!X.call(i,r)&&r!==e&&A(i,r,{get:()=>t[r],enumerable:!(n=P(t,r))||n.enumerable});return i};var p=(i,t,e)=>(e=i!=null?G(V(i)):{},T(t||!i||!i.__esModule?A(e,"default",{value:i,enumerable:!0}):e,i)),Z=i=>T(A({},"__esModule",{value:!0}),i);var g=W((J,y)=>{y.exports=d3});var F={};B(F,{Donut:()=>K,Gauge:()=>$,Pie:()=>q,PieChart:()=>f,parse3dArray:()=>H,parseArrayYZ:()=>L,parseTimeSeries3dArray:()=>v,placeTooltip:()=>C,placeTooltipTop:()=>b});var h=p(g());var d=p(g());var _=p(g());function O(i,t,e=0,n=1){return i===1?[t((n-e)/2+e)]:_.quantize(r=>t(r*(n-e)+e),i)}var I=class{constructor(t,e=n=>n){}screenHeightPercent(t){return this.config.LAYOUT.screenHeightPercent=t,this}minHeight(t){return this.config.LAYOUT.minHeight=t,this}maxHeight(t){return this.config.LAYOUT.maxHeight=t,this}height(t){return this.minHeight(t).maxHeight(t)}minWidth(t){return this.config.LAYOUT.minWidth=t,this}maxWidth(t){return this.config.LAYOUT.maxWidth=t,this}width(t){return this.minWidth(t).maxWidth(t)}animationDuration(t){return this.config.DURATION_MS=t,this}noAnimation(){return this.animationDuration(0)}},R=class extends I{constructor(t,e=n=>n){super(t,e),this.hidden=new d.InternSet}backgroundOpacity(t){return this.config.BACKGROUND_OPACITY=t,this}yAxisRight(){return this.config.Y_AXIS_RIGHT=!0,this}useDiscreteScheme(t){return this.colors=d.scaleOrdinal().domain(this.Z).range(t),this}useContinuousScheme(t,e=0,n=1){return this.useDiscreteScheme(O(this.Z.length,t,e,n))}invertScheme(){return this.colors=this.colors.range(this.colors.range().reverse()),this}startHidden(){return this.hidden=new d.InternSet(this.Z),this}hide(...t){this.hidden=this.hidden.union(new d.InternSet(t)),this.toggle()}show(...t){this.hidden=this.hidden.difference(new d.InternSet(t)),this.toggle()}setHidden(...t){this.hidden=new d.InternSet(t)}hideAll(){this.hidden=new d.InternSet(this.Z),this.toggle()}showAll(){this.hidden.clear(),this.toggle()}};var l=p(g()),S=class{constructor(t,e,n,r){this.top=t,this.right=e,this.bottom=n,this.left=r}};function E(){return new S(15,15,25,25)}var x=class{constructor(t,e,n){this.width=t,this.height=e,this.pad=n||E()}get rangeX(){return[this.pad.left,this.width-this.pad.right]}get rangeY(){return[this.height-this.pad.bottom,this.pad.top]}get innerWidth(){return this.width-this.pad.left-this.pad.right}get innerHeight(){return this.height-this.pad.top-this.pad.bottom}get innerMinimum(){return l.min([this.innerWidth,this.innerHeight])}get midpoint(){return[this.width/2,this.height/2]}};function N(i,{minWidth:t=400,maxWidth:e=void 0,minHeight:n=300,maxHeight:r=void 0,screenHeightPercent:a=.5}={}){let c=document.querySelector(i),s=l.max([c.offsetWidth,t]);e&&(s=l.min([s,e]));let o=window.innerHeight*a;return o=l.max([o,n]),r&&(o=l.min([o,r])),new x(s,o,E())}function k(i,t,e){return l.select(i).append("svg").attr("viewBox",[0,0,t,e]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("overflow","visible")}function D(i,t){let e=l.select(i);if(!e.node())throw new Error(`Unable to find a DOM element for selector '${i}'`);if(e.node().tagName==="svg"){let a=e,c=+a.attr("width"),s=+a.attr("height");if(c&&s)return[a,new x(c,s)];{let o=N(i,t);return[a,o]}}let n=N(i,t);return[k(i,n.width,n.height),n]}var U=p(g());function H(i){return{x:i[0],y:i[1],z:i[2]}}function v(i){return{x:U.isoParse(i[0]),y:i[1],z:i[2]}}function L(i){return{x:null,y:i[0],z:i[1]}}function w(i,t){var e=!0;return function(){e&&(i.apply(this,arguments),e=!1,setTimeout(()=>{e=!0},t))}}function C(i,t,e,n,r=5){let a=i.getBoundingClientRect(),c=e-a.left-window.scrollX,s=n-a.top-window.scrollY,o=0,u=-t.offsetHeight-r,m="left";return c>a.width-t.offsetWidth-r&&(o=-t.offsetWidth-r,m="right"),s<t.offsetHeight+r&&(u=r),[e+o,n+u,m]}function b(i,t,e,n,r=5){let a=i.getBoundingClientRect(),c=e-a.left-window.scrollX,s=0,o=-t.offsetHeight-r,u="left";return c>a.width-t.offsetWidth-r&&(s=-t.offsetWidth-r,u="right"),[e+s,n+o,u]}var f=class extends R{constructor(t,e=n=>n){super(t,e),this.config={LAYOUT:{},DURATION_MS:500,INNER_RADIUS:.3,OUTER_RADIUS:.8,INNER_RADIUS_HOVER:.3,OUTER_RADIUS_HOVER:.9,BACKGROUND_OPACITY:.5,START_ANGLE:0,END_ANGLE:2*Math.PI,INITIAL_CLOSED:!1,SKIP_ENTER_ANIMATION:!1,COLORS:h.schemeCategory10},this.data=h.map(t,e),this.X=Array.from(new h.InternSet(h.map(this.data,n=>n.x))),this.Z=Array.from(new h.InternSet(h.map(this.data,n=>n.z))),this.byX=h.group(this.data,n=>n.x),this.colors=h.scaleOrdinal().domain(this.Z).range(this.config.COLORS)}radii(t,e){return this.config.INNER_RADIUS=t,this.config.OUTER_RADIUS=e,this}hoverRadii(t,e){return this.config.INNER_RADIUS_HOVER=t,this.config.OUTER_RADIUS_HOVER=e,this}angles(t,e){return this.config.START_ANGLE=t,this.config.END_ANGLE=e,this}renderClosed(){return this.config.INITIAL_CLOSED=!0,this}skipEnterAnimation(){return this.config.SKIP_ENTER_ANIMATION=!0,this}get legend(){return h.map(new Set(this.Z),t=>({key:t,color:this.color(t)}))}get outerRadius(){return this.config.OUTER_RADIUS*(this.layout.innerMinimum/2)}get innerRadius(){return this.config.INNER_RADIUS*(this.layout.innerMinimum/2)}get outerRadiusHover(){return this.config.OUTER_RADIUS_HOVER*(this.layout.innerMinimum/2)}get innerRadiusHover(){return this.config.INNER_RADIUS_HOVER*(this.layout.innerMinimum/2)}render(t){if(!this.data.length)return;[this.svg,this.layout]=D(t,this.config.LAYOUT);let e=this.X[this.X.length-1];this.pie=h.pie().sort(null).value(a=>a.y).startAngle(this.config.START_ANGLE).endAngle(this.config.END_ANGLE),this.arc=h.arc().innerRadius(this.innerRadius).outerRadius(this.outerRadius),this.arcEnlarge=h.arc().innerRadius(this.innerRadiusHover).outerRadius(this.outerRadiusHover);let[n,r]=this.layout.midpoint;this.slices=this.svg.append("g").attr("transform",`translate(${n},${r})`),this.gDisplay=this.svg.append("g").attr("transform",`translate(${n},${r})`).attr("class","display").append("text"),this.config.INITIAL_CLOSED||this.update(e)}update(t){let e=this.byX.get(t),n=this.pie(e),r=this.slices.selectAll("path").data(n,c=>c.data.z),a=this.arc;r.transition().duration(this.config.DURATION_MS).attrTween("d",function(c){let s=h.interpolate(this._current,c);return this._current=s(0),o=>a(s(o))}),r.enter().append("g").attr("class","slice").attr("opacity",1).append("path").attr("fill",c=>this.colors(c.data.z)).each(function(c){this._current=c}).transition().duration(this.config.DURATION_MS).attrTween("d",c=>{if(this.config.SKIP_ENTER_ANIMATION)return()=>a(c);let s=h.interpolate({startAngle:0,endAngle:0},c);return o=>a(s(o))})}getLabel(t){return""}set display(t){this.gDisplay.text(t)}enlarge(t){this.slices.selectAll("path").filter(e=>e.data.z===t).transition().duration(this.config.DURATION_MS).attr("d",this.arcEnlarge)}reset(){this.slices.selectAll("path").transition().duration(this.config.DURATION_MS).attr("d",this.arc)}noHighlight(){this.slices.selectAll("g").transition().duration(this.config.DURATION_MS).attr("opacity",1)}highlight(t){this.slices.selectAll("g").transition().duration(this.config.DURATION_MS).attr("opacity",e=>e.data.z===t?1:this.config.BACKGROUND_OPACITY)}onEvent(t,e,n){let r=(s,o)=>{t&&t.call(this,o.data,s)},a=(s,o)=>{s.touches&&(s.preventDefault(),s=s.touches[0]);let u=s.target.getBoundingClientRect(),[m,M]=h.pointer(s,null),Y={x:o.data.x,y:o.data.y,z:o.data.z,dx:u.x+window.scrollX,dy:u.y+window.scrollY,px:m,py:M};e&&e.call(this,Y,s)},c=(s,o)=>{n&&n.call(this,o.data,s)};this.slices.selectAll("path").on("mouseenter",r).on("mousemove",w(a,20.83)).on("mouseleave",c).on("touchstart",r,{passive:!1}).on("touchmove",w(a,20.83),{passive:!1}).on("touchend",c,{passive:!1})}};function K(i,t){return new f(i,t)}function q(i,t){return new f(i,t).radii(0,.8).hoverRadii(0,.9)}function $(i,t){return new f(i,t).angles(-Math.PI*.65,Math.PI*.65).radii(.5,.8).hoverRadii(.55,.9)}return Z(F);})();
//# sourceMappingURL=pie.min.js.map
