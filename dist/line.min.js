var charts=(()=>{var l=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var O=(o,t,e)=>t in o?l(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var X=(o,t)=>{for(var e in t)l(o,e,{get:t[e],enumerable:!0})},v=(o,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of D(t))!k.call(o,s)&&s!==e&&l(o,s,{get:()=>t[s],enumerable:!(r=S(t,s))||r.enumerable});return o};var E=o=>v(l({},"__esModule",{value:!0}),o);var T=(o,t,e)=>O(o,typeof t!="symbol"?t+"":t,e);var Y={};X(Y,{Line:()=>u});var c=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.BACKGROUND_OPACITY=.3,this.DOT_RADIUS=3,this.BAR_STROKE_WIDTH=0,this.EVENT_FPS=48,Object.assign(this,t)}get eventLatency(){return parseInt(1e3/this.EVENT_FPS)}};function _(o,{ratio:t=.2,maxWidth:e=1600,minWidth:r=400,minHeight:s=300}={}){let n=document.querySelector(o),h=d3.min([n.offsetWidth,e]);h=d3.max([n.offsetWidth,r]);let a=d3.max([parseInt(t*h),s]);return[h,a]}var p=class{constructor(t,e={}){T(this,"tickFormatX",null);T(this,"tickFormatY",null);this.options=new c(e),this.data=t,this.parse(t)}getMargin(t,e){return{top:15,right:15,bottom:25,left:45}}getTickValuesX(){return null}getTickValuesY(){return null}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let e=(r,s)=>!isNaN(this.X[s])&&!isNaN(this.Y[s]);this.D=d3.map(t,e),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,r=>this.Z[r]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return d3.map(t,e=>d3.isoParse(e[0]))}parseY(t){return d3.map(t,e=>e[1])}parseZ(t){return d3.map(t,e=>e[2])}getDomainX(){return d3.extent(this.X)}getRangeX(t,e){return[e.left,t.width-e.right]}getDomainY(){return d3.extent(this.Y)}getRangeY(t,e){return[t.height-e.bottom,e.top]}setColors(t){this.colors=d3.scaleOrdinal().domain(this.items).range(d3.schemeCategory10)}getColor(t){return this.colors(t)}getDimensions(t){return _(t,{ratio:.35})}createSVG(t,e){d3.select(t).selectAll("svg").remove(),this.svg=d3.select(t).append("svg").attr("viewBox",[0,0,e.width,e.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}};function x(o,t){var e=!0;return function(){e&&(o.apply(this,arguments),e=!1,setTimeout(()=>{e=!0},t))}}var u=class extends p{render(t){if(!this.X.length)return;let[e,r]=this.getDimensions(t),s={width:e,height:r},n=this.getMargin(e,r);this.createSVG(t,s),this.xScale=d3.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(s,n));let h=d3.axisBottom(this.xScale).tickValues(this.getTickValuesX()).tickFormat(this.tickFormatX).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${s.height-n.bottom+this.options.Y_TICK_GUTTER})`).call(h).call(i=>i.select(".domain").remove()),this.yScale=d3.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(s,n));let a=d3.axisLeft(this.yScale).tickValues(this.getTickValuesY()).tickFormat(this.tickFormatY).tickSize(0).ticks(8);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${n.left-this.options.X_TICK_GUTTER},0)`).call(a).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("transform",`translate(${this.options.X_TICK_GUTTER},0)`).attr("x2",s.width-n.left-n.right));let d=d3.line().defined(i=>this.D[i]).x(i=>this.xScale(this.X[i])).y(i=>this.yScale(this.Y[i]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",this.options.STROKE_WIDTH).selectAll("path").data(this.grouping).join("path").attr("d",([,i])=>d(i)).attr("stroke",([i])=>this.getColor(i)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}clear(){this.svg.selectAll("*").remove()}getLegend(){return d3.map(this.items,t=>Object.assign({color:this.getColor(t.key)},t))}placeDot(t){let e=this.xScale(this.X[t]),r=this.yScale(this.Y[t]),s=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${e},${r})`),this.circle.attr("fill",this.getColor(s))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([e])=>e===t?1:this.options.BACKGROUND_OPACITY).attr("stroke-width",([e])=>e===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,e){let r=null,s=h=>{let[a,d]=d3.pointer(h),i=d3.least(this.I,I=>Math.hypot(this.xScale(this.X[I])-a,this.yScale(this.Y[I])-d));if(typeof i=="undefined"||r&&r==i)return;this.placeDot(i);let g=this.X[i],m=this.Y[i],f=this.Z[i],y={x:g,y:m,z:f,dx:this.xScale(g),dy:this.yScale(m),fx:this.formatX(g),fy:this.formatY(m),fz:this.formatZ(f)};t&&t.call(this,y)},n=h=>{this.hideDot(),e&&e.call(this)};this.svg.on("pointermove",x(s,this.options.eventLatency)).on("pointerleave",n).on("touchstart",h=>{s(h),h.preventDefault()})}};return E(Y);})();
//# sourceMappingURL=line.min.js.map
