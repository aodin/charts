var charts=(()=>{var K=Object.create;var p=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var H=(s,t,i)=>t in s?p(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var b=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),Z=(s,t)=>{for(var i in t)p(s,i,{get:t[i],enumerable:!0})},R=(s,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of v(t))!w.call(s,e)&&e!==i&&p(s,e,{get:()=>t[e],enumerable:!(r=N(t,e))||r.enumerable});return s};var _=(s,t,i)=>(i=s!=null?K(U(s)):{},R(t||!s||!s.__esModule?p(i,"default",{value:s,enumerable:!0}):i,s)),L=s=>R(p({},"__esModule",{value:!0}),s);var C=(s,t,i)=>H(s,typeof t!="symbol"?t+"":t,i);var u=b((M,A)=>{A.exports=d3});var G={};Z(G,{Line:()=>O});var o=_(u());var n=_(u());var E=_(u()),m=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_MAX_COUNT=null,this.X_TICK_SPACE=50,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_MAX_COUNT=null,this.Y_TICK_SPACE=40,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.COLORS=E.schemeCategory10,this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.BACKGROUND_OPACITY=.3,this.DOT_RADIUS=3,this.BAR_STROKE_WIDTH=0,this.INNER_RADIUS=.3,this.OUTER_RADIUS=.8,this.INNER_RADIUS_HOVER=.3,this.OUTER_RADIUS_HOVER=.9,this.EVENT_FPS=48,Object.assign(this,t)}get eventLatency(){return parseInt(1e3/this.EVENT_FPS)}getYTickCount(t){let i=parseInt(t/this.Y_TICK_SPACE)+1;return this.Y_TICK_MAX_COUNT&&i>this.Y_TICK_MAX_COUNT&&(i=this.Y_TICK_MAX_COUNT),i}getXTickCount(t){let i=parseInt(t/this.X_TICK_SPACE)+1;return this.X_TICK_MAX_COUNT&&i>this.X_TICK_MAX_COUNT&&(i=this.X_TICK_MAX_COUNT),i}};var a=_(u()),T=class{constructor(t,i,r,e){this.top=t,this.right=i,this.bottom=r,this.left=e}},S=class{constructor(t,i,r){this.width=t,this.height=i,this.padding=r}get rangeX(){return[this.padding.left,this.width-this.padding.right]}get rangeY(){return[this.height-this.padding.bottom,this.padding.top]}get innerWidth(){return this.width-this.padding.left-this.padding.right}get innerHeight(){return this.height-this.padding.top-this.padding.bottom}get innerMinimum(){return a.min([this.innerWidth,this.innerHeight])}get midpoint(){return[this.width/2,this.height/2]}};function Y(s,{minWidth:t=400,maxWidth:i=void 0,minHeight:r=300,maxHeight:e=void 0,screenHeightFraction:h=.5}={}){let l=document.querySelector(s),g=a.max([l.offsetWidth,t]);i&&(g=a.min([g,i]));let c=window.innerHeight*h;return c=a.max([c,r]),e&&(c=a.min([c,e])),new S(g,c,new T(15,15,25,25))}var I=class{constructor(t,i={}){C(this,"tickFormatX",null);C(this,"tickFormatY",null);this.options=new m(i),this.data=t,this.parse(t)}getPadding(t){return new T(15,15,15,30)}getTickValuesX(){return null}getTickValuesY(){return null}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let i=(r,e)=>!isNaN(this.X[e])&&!isNaN(this.Y[e]);this.D=n.map(t,i),this.I=n.range(this.X.length),this.grouping=n.group(this.I,r=>this.Z[r]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return n.map(t,i=>n.isoParse(i[0]))}parseY(t){return n.map(t,i=>i[1])}parseZ(t){return n.map(t,i=>i[2])}getDomainX(){return n.extent(this.X)}getRangeX(t){return t.rangeX}getDomainY(){return n.extent(this.Y)}getRangeY(t){return t.rangeY}setColors(t){this.colors=n.scaleOrdinal().domain(this.items).range(this.options.COLORS)}getColor(t){return this.colors(t)}getLayout(t){return Y(t)}createSVG(t,i){n.select(t).selectAll("svg").remove(),this.svg=n.select(t).append("svg").attr("viewBox",[0,0,i.width,i.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}clear(){this.svg&&this.svg.selectAll("*").remove()}};function k(s,t){var i=!0;return function(){i&&(s.apply(this,arguments),i=!1,setTimeout(()=>{i=!0},t))}}var O=class extends I{render(t){if(!this.X.length)return;this.layout=this.getLayout(t),this.layout.padding=this.getPadding(this.layout),this.createSVG(t,this.layout),this.xScale=o.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(this.layout));let i=o.axisBottom(this.xScale).tickValues(this.getTickValuesX()).tickFormat(this.tickFormatX).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${this.layout.height-this.layout.padding.bottom+this.options.Y_TICK_GUTTER})`).call(i).call(h=>h.select(".domain").remove()),this.yScale=o.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(this.layout));let r=o.axisLeft(this.yScale).tickValues(this.getTickValuesY()).tickFormat(this.tickFormatY).tickSize(0).ticks(this.options.getYTickCount(this.layout.innerHeight));this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${this.layout.padding.left-this.options.X_TICK_GUTTER},0)`).call(r).call(h=>h.select(".domain").remove()).call(h=>h.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("transform",`translate(${this.options.X_TICK_GUTTER},0)`).attr("x2",this.layout.innerWidth));let e=o.line().defined(h=>this.D[h]).x(h=>this.xScale(this.X[h])).y(h=>this.yScale(this.Y[h]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",this.options.STROKE_WIDTH).selectAll("path").data(this.grouping).join("path").attr("d",([,h])=>e(h)).attr("stroke",([h])=>this.getColor(h)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}getLegend(){return o.map(this.items,t=>Object.assign({color:this.getColor(t.key)},t))}placeDot(t){let i=this.xScale(this.X[t]),r=this.yScale(this.Y[t]),e=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${i},${r})`),this.circle.attr("fill",this.getColor(e))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([i])=>i===t?1:this.options.BACKGROUND_OPACITY).attr("stroke-width",([i])=>i===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,i){let r=null,e=l=>{let[g,c]=o.pointer(l),d=o.least(this.I,x=>Math.hypot(this.xScale(this.X[x])-g,this.yScale(this.Y[x])-c));if(typeof d>"u"||r&&r==d)return;this.placeDot(d);let f=this.X[d],y=this.Y[d],X=this.Z[d],D={x:f,y,z:X,dx:this.xScale(f),dy:this.yScale(y),fx:this.formatX(f),fy:this.formatY(y),fz:this.formatZ(X)};t&&t.call(this,D)},h=l=>{this.hideDot(),i&&i.call(this)};this.svg.on("pointermove",k(e,this.options.eventLatency)).on("pointerleave",h).on("touchstart",l=>{e(l),l.preventDefault()})}};return L(G);})();
//# sourceMappingURL=line.min.js.map
