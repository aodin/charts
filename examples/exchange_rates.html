<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
body {
  font-family: sans-serif;
  color: white;
  background-color: black;
}
#title {
  display: flex;
  flex: columns;
  align-items: center;
  justify-content: space-between;
}
#title h1 {
  font-weight: normal;
}
#legend {
  display: flex;
  flex-wrap: wrap;
}
.legendItem {
  font-size: 0.8rem;
  margin-bottom: 8px;
  padding-right: 1rem !important;
  display: flex;
  align-items: center;
  cursor: pointer;
}
.legendItem[data-hidden="true"] {
  opacity: 0.4;
}
.legendItem > svg {
  padding-right: 0.4rem !important;
  height: 12px;
  width: 12px;
}
.legendItem > svg > rect {
  height: 12px;
  width: 12px;
}
.legendItem > span {
  user-select: none;
}
#chart-tooltip {
  line-height: 1.4;
  text-shadow: -1px -1px 1px black,1px -1px 1px black,-1px 1px 1px black,1px 1px 1px black;
}
    </style>
  </head>
  <body>
    <div id="title">
      <h1>Exchange Rates</h1>
    </div>
    <div id="legend"></div>
    <div id="chart"></div>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script src="exchange_rates.min.js"></script>
    <template id="legendTemplate">
      <div class="legendItem">
        <svg><rect /></svg>
        <span></span>
      </div>
    </template>
    <script type="text/javascript">
const data = {"items": [{"abbrev": "JPY", "name": "Japanese Yen"}, {"abbrev": "BRL", "name": "Brazilian Real"}, {"abbrev": "ZAR", "name": "South African Rand"}, {"abbrev": "NOK", "name": "Norwegian Krone"}, {"abbrev": "KRW", "name": "Korean Won"}, {"abbrev": "INR", "name": "Indian Rupee"}, {"abbrev": "SEK", "name": "Swedish Krona"}, {"abbrev": "IDR", "name": "Indonesian Rupiah"}, {"abbrev": "NZD", "name": "New Zealand Dollar"}, {"abbrev": "AUD", "name": "Australian Dollar"}, {"abbrev": "CNY", "name": "Chinese Yuan"}, {"abbrev": "EUR", "name": "Euro"}, {"abbrev": "GBP", "name": "British Pound Sterling"}, {"abbrev": "CAD", "name": "Canadian Dollar"}, {"abbrev": "HKD", "name": "Hong Kong Dollar"}, {"abbrev": "SGD", "name": "Singapore Dollar"}, {"abbrev": "CHF", "name": "Swiss Franc"}, {"abbrev": "MXN", "name": "Mexican Peso"}], "values": [["2019-03-31", "JPY", 0.0], ["2019-03-31", "BRL", 0.0], ["2019-03-31", "ZAR", 0.0], ["2019-03-31", "NOK", 0.0], ["2019-03-31", "KRW", 0.0], ["2019-03-31", "INR", 0.0], ["2019-03-31", "SEK", 0.0], ["2019-03-31", "IDR", 0.0], ["2019-03-31", "NZD", 0.0], ["2019-03-31", "AUD", 0.0], ["2019-03-31", "CNY", 0.0], ["2019-03-31", "EUR", 0.0], ["2019-03-31", "GBP", 0.0], ["2019-03-31", "CAD", 0.0], ["2019-03-31", "HKD", 0.0], ["2019-03-31", "SGD", 0.0], ["2019-03-31", "CHF", 0.0], ["2019-03-31", "MXN", 0.0], ["2019-06-30", "JPY", -0.003], ["2019-06-30", "BRL", 0.04], ["2019-06-30", "ZAR", 0.027], ["2019-06-30", "NOK", 0.008], ["2019-06-30", "KRW", 0.036], ["2019-06-30", "INR", -0.013], ["2019-06-30", "SEK", 0.031], ["2019-06-30", "IDR", 0.008], ["2019-06-30", "NZD", 0.029], ["2019-06-30", "AUD", 0.018], ["2019-06-30", "CNY", 0.012], ["2019-06-30", "EUR", 0.011], ["2019-06-30", "GBP", 0.014], ["2019-06-30", "CAD", 0.006], ["2019-06-30", "HKD", -0.001], ["2019-06-30", "SGD", 0.006], ["2019-06-30", "CHF", 0.006], ["2019-06-30", "MXN", -0.004], ["2019-09-30", "JPY", -0.029], ["2019-09-30", "BRL", 0.055], ["2019-09-30", "ZAR", 0.048], ["2019-09-30", "NOK", 0.035], ["2019-09-30", "KRW", 0.061], ["2019-09-30", "INR", -0.001], ["2019-09-30", "SEK", 0.045], ["2019-09-30", "IDR", 0.002], ["2019-09-30", "NZD", 0.063], ["2019-09-30", "AUD", 0.05], ["2019-09-30", "CNY", 0.039], ["2019-09-30", "EUR", 0.025], ["2019-09-30", "GBP", 0.06], ["2019-09-30", "CAD", -0.01], ["2019-09-30", "HKD", 0.001], ["2019-09-30", "SGD", 0.011], ["2019-09-30", "CHF", -0.012], ["2019-09-30", "MXN", 0.013], ["2019-12-31", "JPY", -0.015], ["2019-12-31", "BRL", 0.091], ["2019-12-31", "ZAR", 0.052], ["2019-12-31", "NOK", 0.063], ["2019-12-31", "KRW", 0.004], ["2019-12-31", "INR", 0.011], ["2019-12-31", "SEK", 0.05], ["2019-12-31", "IDR", -0.004], ["2019-12-31", "NZD", 0.065], ["2019-12-31", "AUD", 0.048], ["2019-12-31", "CNY", 0.043], ["2019-12-31", "EUR", 0.027], ["2019-12-31", "GBP", 0.012], ["2019-12-31", "CAD", -0.008], ["2019-12-31", "HKD", -0.001], ["2019-12-31", "SGD", 0.005], ["2019-12-31", "CHF", -0.008], ["2019-12-31", "MXN", 0.002], ["2020-03-31", "JPY", -0.012], ["2020-03-31", "BRL", 0.187], ["2020-03-31", "ZAR", 0.097], ["2020-03-31", "NOK", 0.105], ["2020-03-31", "KRW", 0.062], ["2020-03-31", "INR", 0.027], ["2020-03-31", "SEK", 0.054], ["2020-03-31", "IDR", 0.011], ["2020-03-31", "NZD", 0.075], ["2020-03-31", "AUD", 0.083], ["2020-03-31", "CNY", 0.036], ["2020-03-31", "EUR", 0.03], ["2020-03-31", "GBP", 0.014], ["2020-03-31", "CAD", 0.013], ["2020-03-31", "HKD", -0.01], ["2020-03-31", "SGD", 0.024], ["2020-03-31", "CHF", -0.028], ["2020-03-31", "MXN", 0.043], ["2020-06-30", "JPY", -0.023], ["2020-06-30", "BRL", 0.431], ["2020-06-30", "ZAR", 0.274], ["2020-06-30", "NOK", 0.167], ["2020-06-30", "KRW", 0.085], ["2020-06-30", "INR", 0.076], ["2020-06-30", "SEK", 0.057], ["2020-06-30", "IDR", 0.053], ["2020-06-30", "NZD", 0.103], ["2020-06-30", "AUD", 0.085], ["2020-06-30", "CNY", 0.051], ["2020-06-30", "EUR", 0.031], ["2020-06-30", "GBP", 0.049], ["2020-06-30", "CAD", 0.041], ["2020-06-30", "HKD", -0.012], ["2020-06-30", "SGD", 0.042], ["2020-06-30", "CHF", -0.033], ["2020-06-30", "MXN", 0.212], ["2020-09-30", "JPY", -0.037], ["2020-09-30", "BRL", 0.428], ["2020-09-30", "ZAR", 0.205], ["2020-09-30", "NOK", 0.062], ["2020-09-30", "KRW", 0.056], ["2020-09-30", "INR", 0.055], ["2020-09-30", "SEK", -0.035], ["2020-09-30", "IDR", 0.04], ["2020-09-30", "NZD", 0.029], ["2020-09-30", "AUD", -0.005], ["2020-09-30", "CNY", 0.025], ["2020-09-30", "EUR", -0.03], ["2020-09-30", "GBP", 0.007], ["2020-09-30", "CAD", 0.001], ["2020-09-30", "HKD", -0.012], ["2020-09-30", "SGD", 0.014], ["2020-09-30", "CHF", -0.078], ["2020-09-30", "MXN", 0.151], ["2020-12-31", "JPY", -0.051], ["2020-12-31", "BRL", 0.479], ["2020-12-31", "ZAR", 0.122], ["2020-12-31", "NOK", 0.055], ["2020-12-31", "KRW", -0.005], ["2020-12-31", "INR", 0.047], ["2020-12-31", "SEK", -0.057], ["2020-12-31", "IDR", 0.017], ["2020-12-31", "NZD", -0.003], ["2020-12-31", "AUD", -0.022], ["2020-12-31", "CNY", -0.02], ["2020-12-31", "EUR", -0.046], ["2020-12-31", "GBP", -0.012], ["2020-12-31", "CAD", -0.019], ["2020-12-31", "HKD", -0.012], ["2020-12-31", "SGD", -0.005], ["2020-12-31", "CHF", -0.092], ["2020-12-31", "MXN", 0.116], ["2021-03-31", "JPY", -0.039], ["2021-03-31", "BRL", 0.456], ["2021-03-31", "ZAR", 0.069], ["2021-03-31", "NOK", -0.007], ["2021-03-31", "KRW", -0.011], ["2021-03-31", "INR", 0.034], ["2021-03-31", "SEK", -0.084], ["2021-03-31", "IDR", 0.002], ["2021-03-31", "NZD", -0.052], ["2021-03-31", "AUD", -0.078], ["2021-03-31", "CNY", -0.039], ["2021-03-31", "EUR", -0.058], ["2021-03-31", "GBP", -0.055], ["2021-03-31", "CAD", -0.046], ["2021-03-31", "HKD", -0.011], ["2021-03-31", "SGD", -0.017], ["2021-03-31", "CHF", -0.091], ["2021-03-31", "MXN", 0.06], ["2021-06-30", "JPY", -0.007], ["2021-06-30", "BRL", 0.404], ["2021-06-30", "ZAR", 0.007], ["2021-06-30", "NOK", -0.024], ["2021-06-30", "KRW", -0.004], ["2021-06-30", "INR", 0.047], ["2021-06-30", "SEK", -0.083], ["2021-06-30", "IDR", 0.019], ["2021-06-30", "NZD", -0.047], ["2021-06-30", "AUD", -0.075], ["2021-06-30", "CNY", -0.043], ["2021-06-30", "EUR", -0.058], ["2021-06-30", "GBP", -0.069], ["2021-06-30", "CAD", -0.074], ["2021-06-30", "HKD", -0.01], ["2021-06-30", "SGD", -0.016], ["2021-06-30", "CHF", -0.087], ["2021-06-30", "MXN", 0.042], ["2021-09-30", "JPY", -0.002], ["2021-09-30", "BRL", 0.391], ["2021-09-30", "ZAR", 0.046], ["2021-09-30", "NOK", 0.023], ["2021-09-30", "KRW", 0.03], ["2021-09-30", "INR", 0.051], ["2021-09-30", "SEK", -0.056], ["2021-09-30", "IDR", 0.017], ["2021-09-30", "NZD", -0.026], ["2021-09-30", "AUD", -0.029], ["2021-09-30", "CNY", -0.041], ["2021-09-30", "EUR", -0.036], ["2021-09-30", "GBP", -0.054], ["2021-09-30", "CAD", -0.051], ["2021-09-30", "HKD", -0.009], ["2021-09-30", "SGD", -0.002], ["2021-09-30", "CHF", -0.079], ["2021-09-30", "MXN", 0.044], ["2021-12-31", "JPY", 0.031], ["2021-12-31", "BRL", 0.481], ["2021-12-31", "ZAR", 0.095], ["2021-12-31", "NOK", 0.015], ["2021-12-31", "KRW", 0.051], ["2021-12-31", "INR", 0.064], ["2021-12-31", "SEK", -0.037], ["2021-12-31", "IDR", 0.009], ["2021-12-31", "NZD", -0.022], ["2021-12-31", "AUD", -0.024], ["2021-12-31", "CNY", -0.053], ["2021-12-31", "EUR", -0.008], ["2021-12-31", "GBP", -0.035], ["2021-12-31", "CAD", -0.055], ["2021-12-31", "HKD", -0.007], ["2021-12-31", "SGD", 0.002], ["2021-12-31", "CHF", -0.075], ["2021-12-31", "MXN", 0.08], ["2022-03-31", "JPY", 0.056], ["2022-03-31", "BRL", 0.394], ["2022-03-31", "ZAR", 0.088], ["2022-03-31", "NOK", 0.033], ["2022-03-31", "KRW", 0.071], ["2022-03-31", "INR", 0.068], ["2022-03-31", "SEK", 0.02], ["2022-03-31", "IDR", 0.015], ["2022-03-31", "NZD", 0.008], ["2022-03-31", "AUD", -0.016], ["2022-03-31", "CNY", -0.059], ["2022-03-31", "EUR", 0.013], ["2022-03-31", "GBP", -0.028], ["2022-03-31", "CAD", -0.047], ["2022-03-31", "HKD", -0.005], ["2022-03-31", "SGD", -0.001], ["2022-03-31", "CHF", -0.073], ["2022-03-31", "MXN", 0.068], ["2022-06-30", "JPY", 0.178], ["2022-06-30", "BRL", 0.306], ["2022-06-30", "ZAR", 0.115], ["2022-06-30", "NOK", 0.1], ["2022-06-30", "KRW", 0.117], ["2022-06-30", "INR", 0.096], ["2022-06-30", "SEK", 0.074], ["2022-06-30", "IDR", 0.03], ["2022-06-30", "NZD", 0.049], ["2022-06-30", "AUD", -0.002], ["2022-06-30", "CNY", -0.018], ["2022-06-30", "EUR", 0.068], ["2022-06-30", "GBP", 0.038], ["2022-06-30", "CAD", -0.041], ["2022-06-30", "HKD", 0.0], ["2022-06-30", "SGD", 0.017], ["2022-06-30", "CHF", -0.031], ["2022-06-30", "MXN", 0.044], ["2022-09-30", "JPY", 0.255], ["2022-09-30", "BRL", 0.391], ["2022-09-30", "ZAR", 0.213], ["2022-09-30", "NOK", 0.165], ["2022-09-30", "KRW", 0.191], ["2022-09-30", "INR", 0.133], ["2022-09-30", "SEK", 0.151], ["2022-09-30", "IDR", 0.057], ["2022-09-30", "NZD", 0.111], ["2022-09-30", "AUD", 0.042], ["2022-09-30", "CNY", 0.016], ["2022-09-30", "EUR", 0.129], ["2022-09-30", "GBP", 0.107], ["2022-09-30", "CAD", -0.018], ["2022-09-30", "HKD", 0.0], ["2022-09-30", "SGD", 0.032], ["2022-09-30", "CHF", -0.03], ["2022-09-30", "MXN", 0.054], ["2022-12-31", "JPY", 0.289], ["2022-12-31", "BRL", 0.394], ["2022-12-31", "ZAR", 0.264], ["2022-12-31", "NOK", 0.19], ["2022-12-31", "KRW", 0.215], ["2022-12-31", "INR", 0.166], ["2022-12-31", "SEK", 0.172], ["2022-12-31", "IDR", 0.101], ["2022-12-31", "NZD", 0.136], ["2022-12-31", "AUD", 0.087], ["2022-12-31", "CNY", 0.057], ["2022-12-31", "EUR", 0.117], ["2022-12-31", "GBP", 0.113], ["2022-12-31", "CAD", 0.022], ["2022-12-31", "HKD", -0.003], ["2022-12-31", "SGD", 0.027], ["2022-12-31", "CHF", -0.029], ["2022-12-31", "MXN", 0.027], ["2023-03-31", "JPY", 0.201], ["2023-03-31", "BRL", 0.379], ["2023-03-31", "ZAR", 0.268], ["2023-03-31", "NOK", 0.196], ["2023-03-31", "KRW", 0.134], ["2023-03-31", "INR", 0.167], ["2023-03-31", "SEK", 0.138], ["2023-03-31", "IDR", 0.078], ["2023-03-31", "NZD", 0.082], ["2023-03-31", "AUD", 0.042], ["2023-03-31", "CNY", 0.015], ["2023-03-31", "EUR", 0.059], ["2023-03-31", "GBP", 0.072], ["2023-03-31", "CAD", 0.017], ["2023-03-31", "HKD", -0.001], ["2023-03-31", "SGD", -0.016], ["2023-03-31", "CHF", -0.072], ["2023-03-31", "MXN", -0.029], ["2023-06-30", "JPY", 0.246], ["2023-06-30", "BRL", 0.314], ["2023-06-30", "ZAR", 0.334], ["2023-06-30", "NOK", 0.249], ["2023-06-30", "KRW", 0.169], ["2023-06-30", "INR", 0.166], ["2023-06-30", "SEK", 0.146], ["2023-06-30", "IDR", 0.053], ["2023-06-30", "NZD", 0.101], ["2023-06-30", "AUD", 0.066], ["2023-06-30", "CNY", 0.04], ["2023-06-30", "EUR", 0.043], ["2023-06-30", "GBP", 0.04], ["2023-06-30", "CAD", 0.01], ["2023-06-30", "HKD", -0.001], ["2023-06-30", "SGD", -0.012], ["2023-06-30", "CHF", -0.099], ["2023-06-30", "MXN", -0.08], ["2023-09-30", "JPY", 0.312], ["2023-09-30", "BRL", 0.296], ["2023-09-30", "ZAR", 0.33], ["2023-09-30", "NOK", 0.22], ["2023-09-30", "KRW", 0.165], ["2023-09-30", "INR", 0.173], ["2023-09-30", "SEK", 0.178], ["2023-09-30", "IDR", 0.077], ["2023-09-30", "NZD", 0.128], ["2023-09-30", "AUD", 0.088], ["2023-09-30", "CNY", 0.074], ["2023-09-30", "EUR", 0.044], ["2023-09-30", "GBP", 0.029], ["2023-09-30", "CAD", 0.009], ["2023-09-30", "HKD", -0.003], ["2023-09-30", "SGD", -0.004], ["2023-09-30", "CHF", -0.114], ["2023-09-30", "MXN", -0.112], ["2023-12-31", "JPY", 0.345], ["2023-12-31", "BRL", 0.317], ["2023-12-31", "ZAR", 0.339], ["2023-12-31", "NOK", 0.271], ["2023-12-31", "KRW", 0.177], ["2023-12-31", "INR", 0.182], ["2023-12-31", "SEK", 0.171], ["2023-12-31", "IDR", 0.105], ["2023-12-31", "NZD", 0.134], ["2023-12-31", "AUD", 0.099], ["2023-12-31", "CNY", 0.073], ["2023-12-31", "EUR", 0.058], ["2023-12-31", "GBP", 0.052], ["2023-12-31", "CAD", 0.026], ["2023-12-31", "HKD", -0.004], ["2023-12-31", "SGD", -0.001], ["2023-12-31", "CHF", -0.107], ["2023-12-31", "MXN", -0.082], ["2024-03-31", "JPY", 0.348], ["2024-03-31", "BRL", 0.314], ["2024-03-31", "ZAR", 0.348], ["2024-03-31", "NOK", 0.226], ["2024-03-31", "KRW", 0.181], ["2024-03-31", "INR", 0.178], ["2024-03-31", "SEK", 0.134], ["2024-03-31", "IDR", 0.108], ["2024-03-31", "NZD", 0.112], ["2024-03-31", "AUD", 0.083], ["2024-03-31", "CNY", 0.066], ["2024-03-31", "EUR", 0.046], ["2024-03-31", "GBP", 0.027], ["2024-03-31", "CAD", 0.014], ["2024-03-31", "HKD", -0.003], ["2024-03-31", "SGD", -0.011], ["2024-03-31", "CHF", -0.123], ["2024-03-31", "MXN", -0.115], ["2024-06-30", "JPY", 0.385], ["2024-06-30", "BRL", 0.344], ["2024-06-30", "ZAR", 0.339], ["2024-06-30", "NOK", 0.252], ["2024-06-30", "KRW", 0.202], ["2024-06-30", "INR", 0.181], ["2024-06-30", "SEK", 0.16], ["2024-06-30", "IDR", 0.129], ["2024-06-30", "NZD", 0.129], ["2024-06-30", "AUD", 0.086], ["2024-06-30", "CNY", 0.07], ["2024-06-30", "EUR", 0.052], ["2024-06-30", "GBP", 0.032], ["2024-06-30", "CAD", 0.025], ["2024-06-30", "HKD", -0.003], ["2024-06-30", "SGD", -0.004], ["2024-06-30", "CHF", -0.097], ["2024-06-30", "MXN", -0.125]]};

const chart = new rates.ExchangeRates(data, {FONT_SIZE: "12px"});
// Draw the legend
const items = chart.getLegend();

const legend = document.querySelector("#legend");
const template = document.querySelector("#legendTemplate");

const hidden = new Set();

chart.render("#chart");

const tooltip = d3
  .select("body")
  .append("div")
  .attr("id", "chart-tooltip")
  .style("pointer-events", "none")
  .style("position", "absolute")
  .style("opacity", 0)
  .style("font-size", "13px");

// TODO How to get tooltip dimensions directly?
const bbox = document.getElementById("chart-tooltip");
const rect = document.getElementById("chart");

function onMove(data) {
  chart.highlight(data.z);

  // Set text of tooltip, then set coordinates
  tooltip.html(`<strong>${data.fz}</strong></br><em>${data.fx}</em></br>${data.fy}`);

  let offsetX = -3;
  if (data.dx > (3 * rect.offsetWidth) / 4) {
    // Right side of chart
    offsetX = -bbox.offsetWidth;
    tooltip.attr("class", "text-end");
  } else {
    // Left side of chart
    tooltip.attr("class", "text-start");
  }

  tooltip
    .style("opacity", 1)
    .style("left", `${data.dx + rect.offsetLeft + offsetX}px`)
    .style("top", `${data.dy + rect.offsetTop - bbox.offsetHeight - 5}px`);
}

function onLeave() {
  chart.noHighlight();
  tooltip.style("opacity", 0);
}

chart.enableHover(onMove, onLeave);

items.forEach((item) => {
  const clone = template.content.cloneNode(true);
  // clone.dataset.abbrev = item.abbrev;
  const div = clone.querySelector("div");
  div.dataset.abbrev = item.abbrev;

  // Initial show/hide state can be set here
  div.dataset.hidden = "";

  clone
    .querySelector("rect")
    .setAttribute("fill", item.color);
  clone.querySelector("span").textContent = `${item.name}`;
  legend.appendChild(clone);

  // Create hover events that highlight chart on legend hover
  // div.addEventListener("mouseover", (elem) => {
  //   chart.highlight(item.abbrev);
  // });

  // Show only that item when double click
  div.addEventListener("dblclick", (evt) => {
    // Hide everything except the current item
    hidden.clear();

    Array.from(legend.children).forEach(elem => {
      if (elem.dataset.abbrev === item.abbrev) {
        elem.dataset.hidden = "";
      } else {
        hidden.add(elem.dataset.abbrev);
        elem.dataset.hidden = true;
      }
    });
    chart.hide(hidden, "#chart");
    chart.enableHover(onMove, onLeave);
  });

  // Hide the item when single click, unless it is already hidden, then show
  div.addEventListener("click", (evt) => {
    if (div.dataset.hidden === "") {
      hidden.add(item.abbrev);
      chart.hide(hidden, "#chart");
      chart.enableHover(onMove, onLeave);
      div.dataset.hidden = "true";
    } else {
      hidden.delete(item.abbrev);
      chart.hide(hidden, "#chart");
      chart.enableHover(onMove, onLeave);
      div.dataset.hidden = "";
    }
  });

  // Prevent accidental highlighting on Safari
  div.addEventListener('selectstart', (evt) => {
    evt.preventDefault();
  });
});
    </script>
  </body>
</html>
