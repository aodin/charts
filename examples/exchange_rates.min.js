var rates=(()=>{var c=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var Y=(i,t,e)=>t in i?c(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var X=(i,t)=>{for(var e in t)c(i,e,{get:t[e],enumerable:!0})},C=(i,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of O(t))!b.call(i,s)&&s!==e&&c(i,s,{get:()=>t[s],enumerable:!(o=D(t,s))||o.enumerable});return i};var H=i=>C(c({},"__esModule",{value:!0}),i);var l=(i,t,e)=>Y(i,typeof t!="symbol"?t+"":t,e);var Z={};X(Z,{ExchangeRates:()=>I});function x(i,{ratio:t=.2,maxWidth:e=1600,minWidth:o=400,minHeight:s=300}={}){let r=document.querySelector(i),a=d3.min([r.offsetWidth,e]);a=d3.max([r.offsetWidth,o]);let h=d3.max([parseInt(t*a),s]);return[a,h]}var p=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.FONT_SIZE="13px",this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.UNHIGHLIGHTED_OPACITY=.3,this.DOT_RADIUS=3,Object.assign(this,t)}};var d=class{constructor(t,e={}){l(this,"tickFormatX",null);l(this,"tickFormatY",null);this.options=new p(e),this.parse(t)}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.z=t.z;let e=(o,s)=>!isNaN(this.X[s])&&!isNaN(this.Y[s]);this.D=d3.map(t.values,e),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,o=>this.Z[o]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return d3.map(t.values,e=>d3.isoParse(e[0]))}parseY(t){return d3.map(t.values,e=>e[1])}parseZ(t){return d3.map(t.values,e=>e[2])}getDomainX(){return d3.extent(this.X)}getRangeX(t,e){return[e.left,t.width-e.right]}getDomainY(){return d3.extent(this.Y)}getRangeY(t,e){return[t.height-e.bottom,e.top]}setColors(t){let e=t.z.reduce((o,s)=>(o[s.name]=s.color,o),{});this.colors=d3.scaleOrdinal().domain(Object.keys(e)).range(Object.values(e))}getColor(t){return this.colors(t)}createSVG(t,e){d3.select(t).selectAll("svg").remove(),this.svg=d3.select(t).append("svg").attr("viewBox",[0,0,e.width,e.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}};function S(i,t){var e=!0;return function(){e&&(i.apply(this,arguments),e=!1,setTimeout(()=>{e=!0},t))}}var m=class extends d{render(t){let[e,o]=x(t,{ratio:.35}),s={width:e,height:o},r={top:15,right:15,bottom:25,left:45};this.createSVG(t,s),this.xScale=d3.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(s,r));let a=d3.axisBottom(this.xScale).tickFormat(this.tickFormatX).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${s.height-r.bottom+2})`).call(a).call(n=>n.select(".domain").remove()),this.yScale=d3.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(s,r));let h=d3.axisLeft(this.yScale).tickFormat(this.tickFormatY).tickSize(0).ticks(8);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${r.left-10},0)`).call(h).call(n=>n.select(".domain").remove()).call(n=>n.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("x2",s.width-r.left-r.right));let g=d3.line().defined(n=>this.D[n]).x(n=>this.xScale(this.X[n])).y(n=>this.yScale(this.Y[n]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",this.options.STROKE_WIDTH).selectAll("path").data(this.grouping).join("path").attr("d",([,n])=>g(n)).attr("stroke",([n])=>this.getColor(n)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}clear(){this.svg.selectAll("*").remove()}getLegend(){return d3.map(this.items,t=>Object.assign({color:this.getColor(t.key)},t))}hide(t){}placeDot(t){let e=this.xScale(this.X[t]),o=this.yScale(this.Y[t]),s=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${e},${o})`),this.circle.attr("fill",this.getColor(s))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([e])=>e===t?1:this.options.UNHIGHLIGHTED_OPACITY),this.path.attr("stroke-width",([e])=>e===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,e){let o=null,s=a=>{let[h,g]=d3.pointer(a),n=d3.least(this.I,T=>Math.hypot(this.xScale(this.X[T])-h,this.yScale(this.Y[T])-g));if(typeof n=="undefined"||o&&o==n)return;this.placeDot(n);let u=this.X[n],f=this.Y[n],y=this.Z[n],_={x:u,y:f,z:y,dx:this.xScale(u),dy:this.yScale(f),fx:this.formatX(u),fy:this.formatY(f),fz:this.formatZ(y)};t&&t.call(this,_)},r=a=>{this.hideDot(),e&&e.call(this)};this.svg.on("pointermove",S(s,20)).on("pointerleave",r)}};function v(i,t,e=0,o=1){let s=o-e,r=i.length>1?s/i.length:s/2;return d3.map(i,(a,h)=>t(o-r*h-r/2))}var k=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"});function N(i){return`${parseInt(i.getUTCMonth()/3)+1}Q ${i.getUTCFullYear()}`}var I=class extends m{constructor(){super(...arguments);l(this,"tickFormatY",d3.format(",.1%"))}parse(e,o){this.X=d3.map(e.values,r=>d3.isoParse(r[0])),this.Y=d3.map(e.values,r=>r[2]),this.Z=d3.map(e.values,r=>r[1]),this.items=e.items,this.byKey=Object.fromEntries(this.items.map(r=>[r.abbrev,r]));let s=(r,a)=>!isNaN(this.X[a])&&!isNaN(this.Y[a]);this.D=d3.map(e.values,s),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,r=>this.Z[r]),this.setColors(e)}setColors(e){let o=d3.map(this.items,r=>r.abbrev),s=v(o,d3.interpolateRainbow);this.colors=d3.scaleOrdinal().domain(o).range(s)}formatX(e){return N(e)}formatY(e){return k.format(e)}formatZ(e){return this.byKey[e].name}getLegend(){return d3.map(this.items,e=>Object.assign({color:this.getColor(e.abbrev)},e))}};return H(Z);})();
//# sourceMappingURL=exchange_rates.min.js.map
