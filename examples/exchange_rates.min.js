var rates=(()=>{var g=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var O=Object.prototype.hasOwnProperty;var D=(o,t)=>{for(var s in t)g(o,s,{get:t[s],enumerable:!0})},b=(o,t,s,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _(t))!O.call(o,i)&&i!==s&&g(o,i,{get:()=>t[i],enumerable:!(e=v(t,i))||e.enumerable});return o};var C=o=>b(g({},"__esModule",{value:!0}),o);var Y={};D(Y,{ExchangeRates:()=>m});function y(o,{ratio:t=.2,maxWidth:s=1600,minWidth:e=400,minHeight:i=300}={}){let h=document.querySelector(o),n=d3.min([h.offsetWidth,s]);n=d3.max([h.offsetWidth,e]);let a=d3.max([parseInt(t*n),i]);return[n,a]}var l=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.FONT_SIZE="13px",this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.UNHIGHLIGHTED_OPACITY=.3,this.DOT_RADIUS=3,Object.assign(this,t)}};var c=class{constructor(t,s={}){this.options=new l(s),this.parse(t)}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.z=t.z;let s=(e,i)=>!isNaN(this.X[i])&&!isNaN(this.Y[i]);this.D=d3.map(t.values,s),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,e=>this.Z[e]),this.setColors(t)}parseX(t){return d3.map(t.values,s=>d3.isoParse(s[0]))}parseY(t){return d3.map(t.values,s=>s[1])}parseZ(t){return d3.map(t.values,s=>s[2])}getDomainX(){return d3.extent(this.X)}getRangeX(t,s){return[s.left,t.width-s.right]}getDomainY(){return d3.extent(this.Y)}getRangeY(t,s){return[t.height-s.bottom,s.top]}setColors(t){let s=t.z.reduce((e,i)=>(e[i.name]=i.color,e),{});this.colors=d3.scaleOrdinal().domain(Object.keys(s)).range(Object.values(s))}getColor(t){return this.colors(t)}createSVG(t,s){d3.select(t).selectAll("svg").remove(),this.svg=d3.select(t).append("svg").attr("viewBox",[0,0,s.width,s.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}};function x(o,t){var s=!0;return function(){s&&(o.apply(this,arguments),s=!1,setTimeout(()=>{s=!0},t))}}function H(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)}var p=class extends c{render(t){let[s,e]=y(t,{ratio:.35}),i={width:s,height:e},h={top:15,right:15,bottom:25,left:45};this.createSVG(t,i),this.xScale=d3.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(i,h));let n=d3.axisBottom(this.xScale).tickSizeInner(4);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${i.height-h.bottom+2})`).call(n).call(r=>r.select(".domain").remove()),this.yScale=d3.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(i,h));let a=d3.axisLeft(this.yScale).tickSize(0).ticks(8);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${h.left-10},0)`).call(a).call(r=>r.select(".domain").remove()).call(r=>r.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("x2",i.width-h.left-h.right));let d=d3.line().defined(r=>this.D[r]).x(r=>this.xScale(this.X[r])).y(r=>this.yScale(this.Y[r]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(this.grouping).join("path").attr("d",([,r])=>d(r)).attr("stroke",([r])=>this.getColor(r)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}clear(){this.svg.selectAll("*").remove()}getLegend(){return d3.map(this.z,t=>H(t)?Object.assign({color:this.getColor(t.name)},t):{name:t,color:this.getColor(t)})}hide(t){}placeDot(t){let s=this.xScale(this.X[t]),e=this.yScale(this.Y[t]),i=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${s},${e})`),this.circle.attr("fill",this.getColor(i))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([s])=>s===t?1:this.options.UNHIGHLIGHTED_OPACITY),this.path.attr("stroke-width",([s])=>s===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,s){let e=null,i=n=>{let[a,d]=d3.pointer(n),r=d3.least(this.I,I=>Math.hypot(this.xScale(this.X[I])-a,this.yScale(this.Y[I])-d));if(typeof r=="undefined"||e&&e==r)return;this.placeDot(r);let u=this.X[r],f=this.Y[r],S={x:u,y:f,z:this.Z[r],dx:this.xScale(u),dy:this.yScale(f)};t&&t.call(this,S)},h=n=>{this.hideDot(),s&&s.call(this)};this.svg.on("pointermove",x(i,20)).on("pointerleave",h)}};function T(o,t,s=0,e=1){let i=e-s,h=o.length>1?i/o.length:i/2;return d3.map(o,(n,a)=>t(e-h*a-h/2))}var m=class extends p{parse(t){this.X=d3.map(t.values,e=>d3.isoParse(e[0])),this.Y=d3.map(t.values,e=>e[2]),this.Z=d3.map(t.values,e=>e[1]),this.z=t.categories;let s=(e,i)=>!isNaN(this.X[i])&&!isNaN(this.Y[i]);this.D=d3.map(t.values,s),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,e=>this.Z[e]),this.setColors(t)}setColors(t){let s=d3.map(t.categories,i=>i.abbrev),e=T(s,d3.interpolateRainbow);this.colors=d3.scaleOrdinal().domain(s).range(e)}};return C(Y);})();
//# sourceMappingURL=exchange_rates.min.js.map
