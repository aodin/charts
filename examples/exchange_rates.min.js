var rates=(()=>{var g=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var X=Object.prototype.hasOwnProperty;var C=(r,t,e)=>t in r?g(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var v=(r,t)=>{for(var e in t)g(r,e,{get:t[e],enumerable:!0})},O=(r,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of k(t))!X.call(r,i)&&i!==e&&g(r,i,{get:()=>t[i],enumerable:!(s=Y(t,i))||s.enumerable});return r};var w=r=>O(g({},"__esModule",{value:!0}),r);var p=(r,t,e)=>C(r,typeof t!="symbol"?t+"":t,e);var H={};v(H,{ExchangeRates:()=>T});function x(r,{ratio:t=.2,maxWidth:e=1600,minWidth:s=400,minHeight:i=300}={}){let a=document.querySelector(r),o=d3.min([a.offsetWidth,e]);o=d3.max([a.offsetWidth,s]);let h=d3.max([parseInt(t*o),i]);return[o,h]}function _(r,t,e,s,i){let a=d3.select("body").append("svg").attr("width",100).attr("height",t).style("visibility","hidden"),o=d3.scaleLinear().domain(e).range([t-r.bottom,r.top]),h=d3.axisLeft(o).tickFormat(s).tickSize(0).ticks(8),n=a.append("g").style("font-size",i.FONT_SIZE).call(h).selectAll(".tick text"),l=0;return n.each(function(){let c=this.getBBox();c.width>l&&(l=c.width)}),l+i.X_TICK_GUTTER+5}var m=class{constructor(t={}){this.ANIMATION_DURATION_MS=500,this.X_TICK_SIZE=4,this.X_TICK_GUTTER=3,this.Y_TICK_SIZE=0,this.Y_TICK_GUTTER=5,this.FONT_SIZE="13px",this.BAND_PADDING=.2,this.VOLUME_OPACITY=.6,this.OHLC_COLORS=["#1ebc8c","#b2b2b2","#f34d27"],this.STROKE_WIDTH=1.5,this.HIGHLIGHT_STROKE_WIDTH=2,this.UNHIGHLIGHTED_OPACITY=.3,this.DOT_RADIUS=3,Object.assign(this,t)}};var u=class{constructor(t,e={}){p(this,"tickFormatX",null);p(this,"tickFormatY",null);this.options=new m(e),this.data=t,this.parse(t)}getMargin(t,e){return margin={top:15,right:15,bottom:25,left:45}}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t),this.items=new Set(this.Z);let e=(s,i)=>!isNaN(this.X[i])&&!isNaN(this.Y[i]);this.D=d3.map(t,e),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,s=>this.Z[s]),this.setColors(t)}formatX(t){return t}formatY(t){return t}formatZ(t){return t}parseX(t){return d3.map(t,e=>d3.isoParse(e[0]))}parseY(t){return d3.map(t,e=>e[1])}parseZ(t){return d3.map(t,e=>e[2])}getDomainX(){return d3.extent(this.X)}getRangeX(t,e){return[e.left,t.width-e.right]}getDomainY(){return d3.extent(this.Y)}getRangeY(t,e){return[t.height-e.bottom,e.top]}setColors(t){this.colors=d3.scaleOrdinal().domain(this.items).range(d3.schemeCategory10)}getColor(t){return this.colors(t)}createSVG(t,e){d3.select(t).selectAll("svg").remove(),this.svg=d3.select(t).append("svg").attr("viewBox",[0,0,e.width,e.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size",this.options.FONT_SIZE).style("overflow","visible")}};function S(r,t){var e=!0;return function(){e&&(r.apply(this,arguments),e=!1,setTimeout(()=>{e=!0},t))}}var f=class extends u{getMargin(t,e){return{top:15,right:15,bottom:25,left:45}}getTickValuesX(){return null}getTickValuesY(){return null}render(t){if(!this.X.length)return;let[e,s]=x(t,{ratio:.35}),i={width:e,height:s},a=this.getMargin(e,s);this.createSVG(t,i),this.xScale=d3.scaleUtc().domain(this.getDomainX()).range(this.getRangeX(i,a));let o=d3.axisBottom(this.xScale).tickValues(this.getTickValuesX()).tickFormat(this.tickFormatX).tickSizeInner(this.options.X_TICK_SIZE);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(0,${i.height-a.bottom+this.options.Y_TICK_GUTTER})`).call(o).call(n=>n.select(".domain").remove()),this.yScale=d3.scaleLinear().domain(this.getDomainY()).range(this.getRangeY(i,a));let h=d3.axisLeft(this.yScale).tickFormat(this.getTickValuesY()).tickFormat(this.tickFormatY).tickSize(0).ticks(8);this.svg.append("g").style("font-size",this.options.FONT_SIZE).attr("transform",`translate(${a.left-this.options.X_TICK_GUTTER},0)`).call(h).call(n=>n.select(".domain").remove()).call(n=>n.selectAll(".tick line").clone().attr("stroke","#888").attr("stroke-opacity",.4).attr("transform",`translate(${this.options.X_TICK_GUTTER},0)`).attr("x2",i.width-a.left-a.right));let d=d3.line().defined(n=>this.D[n]).x(n=>this.xScale(this.X[n])).y(n=>this.yScale(this.Y[n]));this.path=this.svg.append("g").attr("fill","none").attr("stroke-width",this.options.STROKE_WIDTH).selectAll("path").data(this.grouping).join("path").attr("d",([,n])=>d(n)).attr("stroke",([n])=>this.getColor(n)),this.dot=this.svg.append("g").style("display","none"),this.circle=this.dot.append("circle").attr("r",this.options.DOT_RADIUS)}clear(){this.svg.selectAll("*").remove()}getLegend(){return d3.map(this.items,t=>Object.assign({color:this.getColor(t.key)},t))}hide(t){}placeDot(t){let e=this.xScale(this.X[t]),s=this.yScale(this.Y[t]),i=this.Z[t];this.dot.style("display",null).attr("transform",`translate(${e},${s})`),this.circle.attr("fill",this.getColor(i))}hideDot(){this.dot.style("display","none")}noHighlight(){this.path.attr("opacity",1).attr("stroke-width",this.options.STROKE_WIDTH)}highlight(t){this.path.attr("opacity",([e])=>e===t?1:this.options.UNHIGHLIGHTED_OPACITY),this.path.attr("stroke-width",([e])=>e===t?this.options.HIGHLIGHT_STROKE_WIDTH:this.options.STROKE_WIDTH)}enableHover(t,e){let s=null,i=o=>{let[h,d]=d3.pointer(o),n=d3.least(this.I,y=>Math.hypot(this.xScale(this.X[y])-h,this.yScale(this.Y[y])-d));if(typeof n=="undefined"||s&&s==n)return;this.placeDot(n);let l=this.X[n],c=this.Y[n],I=this.Z[n],D={x:l,y:c,z:I,dx:this.xScale(l),dy:this.yScale(c),fx:this.formatX(l),fy:this.formatY(c),fz:this.formatZ(I)};t&&t.call(this,D)},a=o=>{this.hideDot(),e&&e.call(this)};this.svg.on("pointermove",S(i,20)).on("pointerleave",a)}};function b(r,t,e=0,s=1){let i=s-e,a=r.length>1?i/r.length:i/2;return d3.map(r,(o,h)=>t(s-a*h-a/2))}var E=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"});function F(r){return`${parseInt(r.getUTCMonth()/3)+1}Q ${r.getUTCFullYear()}`}var T=class extends f{constructor(){super(...arguments);p(this,"tickFormatY",d3.format(",.1%"));p(this,"tickFormatX",(e,s)=>e.getUTCFullYear())}getMargin(e,s){let i={top:15,right:15,bottom:15,left:15};return i.left=_(i,s,this.getDomainY(),this.tickFormatY,this.options),i}getTickValuesX(){let[e,s]=this.getDomainX(),i=d3.range(e.getUTCFullYear()+1,s.getUTCFullYear()+1);return d3.map(i,a=>new Date(a,2,31))}parse(e,s){let i=e.values;s&&s.size>0&&(i=e.values.filter(o=>!s.has(o[1]))),this.X=d3.map(i,o=>d3.isoParse(o[0])),this.Y=d3.map(i,o=>o[2]),this.Z=d3.map(i,o=>o[1]),this.items=e.items,this.byKey=Object.fromEntries(this.items.map(o=>[o.abbrev,o]));let a=(o,h)=>!isNaN(this.X[h])&&!isNaN(this.Y[h]);this.D=d3.map(i,a),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,o=>this.Z[o]),this.setColors(e)}hide(e,s){this.clear(),this.parse(this.data,new Set(e)),this.render(s)}setColors(e){let s=d3.map(this.items,a=>a.abbrev),i=b(s,d3.interpolateRainbow);this.colors=d3.scaleOrdinal().domain(s).range(i)}formatX(e){return F(e)}formatY(e){return E.format(e)}formatZ(e){return this.byKey[e].name}getLegend(){return d3.map(this.items,e=>Object.assign({color:this.getColor(e.abbrev)},e))}};return w(H);})();
//# sourceMappingURL=exchange_rates.min.js.map
