var charts=(()=>{var g=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var V=(s,t)=>{for(var e in t)g(s,e,{get:t[e],enumerable:!0})},z=(s,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of B(t))!$.call(s,o)&&o!==e&&g(s,o,{get:()=>t[o],enumerable:!(a=N(t,o))||a.enumerable});return s};var M=s=>z(g({},"__esModule",{value:!0}),s);var K={};V(K,{OHLCV:()=>y,volumeFormatter:()=>X});function k(s,{ratio:t=.2,maxWidth:e=1600,minWidth:a=400,minHeight:o=300}={}){let i=document.querySelector(s),c=d3.min([i.offsetWidth,e]);c=d3.max([i.offsetWidth,a]);let f=d3.max([parseInt(t*c),o]);return[c,f]}var d=class{constructor(t,e={}){this.parse(t)}parse(t){this.X=this.parseX(t),this.Y=this.parseY(t),this.Z=this.parseZ(t);let e=(a,o)=>!isNaN(this.X[o])&&!isNaN(this.Y[o]);this.D=d3.map(t.values,e),this.I=d3.range(this.X.length),this.grouping=d3.group(this.I,a=>this.Z[a]),this.setColors(t)}parseX(t){return d3.map(t.values,e=>d3.isoParse(e[0]))}parseY(t){return d3.map(t.values,e=>e[1])}parseZ(t){return d3.map(t.values,e=>e[2])}getDomainX(){return d3.extent(this.X)}getRangeX(t,e){return[e.left,t.width-e.right]}getDomainY(){return d3.extent(this.Y)}getRangeY(t,e){return[t.height-e.bottom,e.top]}setColors(t){let e=t.z.reduce((a,o)=>(a[o.name]=o.color,a),{});this.colors=d3.scaleOrdinal().domain(Object.keys(e)).range(Object.values(e))}getColor(t){return this.colors(t)}createSVG(t,e){d3.select(t).selectAll("svg").remove(),this.svg=d3.select(t).append("svg").attr("viewBox",[0,0,e.width,e.height]).attr("style","max-width: 100%; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").style("font-size","13px").style("overflow","visible")}};var J=d3.utcFormat("%b"),O=d3.utcFormat("%b %-d"),Q=d3.utcFormat("%b %Y"),W=d3.utcFormat("%b %-d, %Y"),tt=d3.utcFormat("%B %-d, %Y");function v(){let s=null;return function(t){let e=t.getUTCFullYear();return s!==e?(s=e,W(t)):O(t)}}var u=500,Z=4,G=3,U=0,x=5,D=.2,E=["#1ebc8c","#b2b2b2","#f34d27"];function X(s){return s<=0?"":s>=1e9?`${s/1e9}B`:`${s/1e6}M`}var y=class extends d{parse(t){this.X=d3.map(t,e=>d3.isoParse(e[0])),this.Yo=d3.map(t,e=>e[1]),this.Yh=d3.map(t,e=>e[2]),this.Yl=d3.map(t,e=>e[3]),this.Yc=d3.map(t,e=>e[4]),this.Yv=d3.map(t,e=>e[5]),this.I=d3.range(this.X.length)}getDomainX(){return d3.extent(this.X)}getDomainY(){this.minPrice=d3.min(this.Yl);let t=d3.max(this.Yh);return this.yDomain=[this.minPrice,t+(t-this.minPrice)*.05],this.yDomainVolume=[0,d3.max(this.Yv)],this.yDomain}getColor(t){return E[1+Math.sign(this.Yo[t]-this.Yc[t])]}render(t){let[e,a]=k(t,{ratio:.35}),o={width:e,height:a},i={top:15,right:25,bottom:25,left:40},c=a-i.top-i.bottom;this.chartHeight=c;let m=c*.9,C=[i.top+m,i.top],I=[i.top+c,i.top+m],F=",f",Y="",p=parseInt(this.X.length/10);p<1&&(p=1);let P=d3.filter(this.X,(r,R)=>R%p===0),l=d3.scaleBand(this.X,this.getRangeX(o,i)).padding(D).align(.1);this.xScale=l;let n=d3.scaleLinear(this.getDomainY(),C),h=d3.scaleLinear(this.yDomainVolume,I),S=v(),w=d3.axisBottom(l).tickFormat(S).tickValues(P).tickSize(Z);this.bandWidth=l.step();let T=d3.axisLeft(n).ticks(m/40,F).tickSize(U),A=d3.axisRight(h).ticks(2).tickFormat(X).tickSize(3);this.createSVG(t,o);let _=this.bandWidth*D/2;this.svg.append("g").attr("transform",`translate(${_},${a-i.bottom+G})`).call(w).call(r=>r.select(".domain").remove()),this.svg.append("g").attr("transform",`translate(${i.left-x},0)`).call(T).call(r=>r.select(".domain").remove()).call(r=>r.selectAll(".tick line").clone().attr("stroke","#bbb").attr("stroke-opacity",.5).attr("x1",x).attr("x2",e+x-i.left-i.right)).call(r=>r.append("text").attr("x",-i.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(Y)),this.svg.append("g").attr("transform",`translate(${e-i.right},0)`).call(A).call(r=>r.select(".domain").remove()).call(r=>r.append("text").attr("x",-i.left).attr("fill","currentColor").attr("text-anchor","start").text(Y));let b=this.svg.append("g").attr("stroke","currentColor").attr("stroke-linecap","butt").selectAll("g").data(this.I).join("g").attr("transform",r=>`translate(${l(this.X[r])+this.bandWidth/2},0)`);b.append("line").attr("stroke","currentColor").attr("stroke-width",1).attr("opacity",.8).attr("y1",n(this.minPrice)).attr("y2",n(this.minPrice)).transition().duration(u).attr("y1",r=>n(this.Yl[r])).attr("y2",r=>n(this.Yh[r])),b.append("line").attr("stroke-width",l.bandwidth()).attr("stroke",r=>this.getColor(r)).attr("y1",n(this.minPrice)).attr("y2",n(this.minPrice)).transition().duration(u).attr("y1",r=>n(this.Yo[r])).attr("y2",r=>n(this.Yc[r])),this.svg.append("g").attr("stroke","currentColor").attr("stroke-linecap","butt").selectAll("g").data(this.I).join("g").attr("transform",r=>`translate(${l(this.X[r])+this.bandWidth/2},0)`).append("line").attr("y1",h(0)).attr("y2",h(0)).attr("stroke-width",l.bandwidth()).attr("stroke",r=>this.getColor(r)).style("opacity",.5).transition().duration(u).attr("y2",r=>h(this.Yv[r]))}};return M(K);})();
//# sourceMappingURL=ohlcv.min.js.map
